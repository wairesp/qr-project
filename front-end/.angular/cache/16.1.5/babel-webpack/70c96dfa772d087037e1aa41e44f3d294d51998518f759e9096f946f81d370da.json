{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/lsesp/Desktop/qr-project/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from '@angular/core';\nimport { Injectable, EventEmitter, Component, ViewChild, ViewEncapsulation, NgModule } from '@angular/core';\nimport { AsyncSubject, BehaviorSubject } from 'rxjs';\nconst _c0 = [\"video\"];\nconst _c1 = [\"canvas\"];\nconst _c2 = [\"resultsPanel\"];\nconst WASMPROJECT = \"assets/wasm/index.js\";\nconst WASMREMOTE = \"https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@1.6.4/wasm/index.js\";\nconst WASMREMOTELATEST = \"https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@latest/wasm/index.js\";\nconst BEEP = `data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV`;\nconst MEDIA_STREAM_DEFAULT = {\n  audio: false,\n  video: true\n};\nconst CANVAS_STYLES_LAYER = {\n  lineWidth: 1,\n  strokeStyle: 'green',\n  fillStyle: '#55f02880'\n};\nconst CANVAS_STYLES_TEXT = {\n  font: '15px serif',\n  strokeStyle: '#fff0',\n  fillStyle: '#ff0000'\n};\nconst CONFIG_DEFAULT = {\n  src: '',\n  fps: 30,\n  vibrate: 300,\n  decode: 'utf-8',\n  isBeep: true,\n  constraints: MEDIA_STREAM_DEFAULT,\n  canvasStyles: [CANVAS_STYLES_LAYER, CANVAS_STYLES_TEXT]\n};\n\n/**\n * WASM_READY\n * @returns\n */\nvar WASM_READY = () => 'zbarWasm' in window;\n/**\n * OVERRIDES\n * @param variableKey\n * @param config\n * @param defaultConfig\n * @returns\n */\nconst OVERRIDES = (variableKey, config, defaultConfig) => {\n  if (config && Object.keys(config[variableKey]).length) {\n    for (const key in defaultConfig) {\n      const cloneDeep = JSON.parse(JSON.stringify({\n        ...config[variableKey],\n        ...{\n          [key]: defaultConfig[key]\n        }\n      }));\n      config[variableKey] = config[variableKey].hasOwnProperty(key) ? config[variableKey] : cloneDeep;\n    }\n    return config[variableKey];\n  } else {\n    return defaultConfig;\n  }\n};\n/**\n * AS_COMPLETE\n * @param as\n * @param data\n * @param error\n */\nconst AS_COMPLETE = (as, data, error) => {\n  error ? as.error(error) : as.next(data);\n  as.complete();\n};\n/**\n * PLAY_AUDIO\n * @param isPlay\n * @returns\n */\nconst PLAY_AUDIO = (isPlay = false) => {\n  if (isPlay === false) return;\n  const audio = new Audio(BEEP);\n  // when the sound has been loaded, execute your code\n  audio.oncanplaythrough = () => {\n    const promise = audio.play();\n    if (promise) {\n      promise.catch(e => {\n        if (e.name === \"NotAllowedError\" || e.name === \"NotSupportedError\") {\n          // console.log(e.name);\n        }\n      });\n    }\n  };\n};\n/**\n * DRAW_RESULT_APPEND_CHILD\n * @param code\n * @param oriCanvas\n * @param elTarget\n * @param canvasStyles\n */\nconst DRAW_RESULT_APPEND_CHILD = (code, oriCanvas, elTarget, canvasStyles) => {\n  let widthZoom;\n  let heightZoom;\n  let oriWidth = oriCanvas.width;\n  let oriHeight = oriCanvas.height;\n  let oriWHRatio = oriWidth / oriHeight;\n  let imgWidth = parseInt(getComputedStyle(oriCanvas).width);\n  let imgHeight = parseInt(getComputedStyle(oriCanvas).height);\n  let imgWHRatio = imgWidth / imgHeight;\n  elTarget.innerHTML = '';\n  if (oriWHRatio > imgWHRatio) {\n    widthZoom = imgWidth / oriWidth;\n    heightZoom = imgWidth / oriWHRatio / oriHeight;\n  } else {\n    heightZoom = imgHeight / oriHeight;\n    widthZoom = imgHeight * oriWHRatio / oriWidth;\n  }\n  for (let i = 0; i < code.length; i++) {\n    const _code = code[i];\n    // New canvas\n    let cvs = document.createElement(\"canvas\");\n    let ctx = cvs.getContext('2d', {\n      willReadFrequently: true\n    });\n    let loc = {};\n    let X = [];\n    let Y = [];\n    let fontSize = 0;\n    let svgSize = 0;\n    let num = canvasStyles.length === 2 && canvasStyles[1]?.font?.replace(/[^0-9]/g, '');\n    if (num && /[0-9]/g.test(num)) {\n      fontSize = parseFloat(num);\n      svgSize = (widthZoom || 1) * fontSize;\n      if (Number.isNaN(svgSize)) {\n        svgSize = fontSize;\n      }\n    }\n    // Point x,y\n    const points = _code.points;\n    for (let j = 0; j < points.length; j++) {\n      const xj = points?.[j]?.x ?? 0;\n      const yj = points?.[j]?.y ?? 0;\n      loc[`x${j + 1}`] = xj;\n      loc[`y${j + 1}`] = yj;\n      X.push(xj);\n      Y.push(yj);\n    }\n    // Min max\n    let maxX = Math.max(...X);\n    let minX = Math.min(...X);\n    let maxY = Math.max(...Y);\n    let minY = Math.min(...Y);\n    // Add class\n    cvs.setAttribute('class', 'qrcode-polygon');\n    // Size with screen zoom\n    if (oriWHRatio > imgWHRatio) {\n      cvs.style.top = minY * heightZoom + (imgHeight - imgWidth / oriWHRatio) * 0.5 + \"px\";\n      cvs.style.left = minX * widthZoom + \"px\";\n      cvs.width = (maxX - minX) * widthZoom;\n      cvs.height = (maxY - minY) * widthZoom;\n    } else {\n      cvs.style.top = minY * heightZoom + \"px\";\n      cvs.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + \"px\";\n      cvs.width = (maxX - minX) * heightZoom;\n      cvs.height = (maxY - minY) * heightZoom;\n    }\n    // Style for canvas\n    for (const key in canvasStyles[0]) {\n      ctx[key] = canvasStyles[0][key];\n    }\n    // polygon [x,y, x,y, x,y.....];\n    const polygon = [];\n    for (let k = 0; k < X.length; k++) {\n      polygon.push((loc[`x${k + 1}`] - minX) * heightZoom);\n      polygon.push((loc[`y${k + 1}`] - minY) * widthZoom);\n    }\n    // Copy array\n    const shape = polygon.slice(0);\n    // Draw polygon\n    ctx.beginPath();\n    ctx.moveTo(shape.shift(), shape.shift());\n    while (shape.length) {\n      ctx.lineTo(shape.shift(), shape.shift()); //x,y\n    }\n\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n    if (fontSize) {\n      // Tooltip result\n      const qrcodeTooltipTemp = document.createElement('div');\n      qrcodeTooltipTemp.setAttribute('class', 'qrcode-tooltip-temp');\n      qrcodeTooltipTemp.innerText = _code.value;\n      qrcodeTooltipTemp.style.maxWidth = (oriWidth > window.innerWidth ? window.innerWidth * 0.9 : oriWidth) + \"px\";\n      qrcodeTooltipTemp.style.borderRadius = `clamp(1px, ${widthZoom * fontSize - 10}px, 3px)`;\n      qrcodeTooltipTemp.style.paddingBlock = `clamp(1px, ${widthZoom * fontSize - 10}px, 3px)`; // top - bottom\n      qrcodeTooltipTemp.style.paddingInline = `clamp(2.5px, ${widthZoom * fontSize - 6}px, 10px)`; // left - right\n      const xmlString = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${svgSize}\" height=\"${svgSize}\" viewBox=\"0 0 512 512\"><rect x=\"128\" y=\"128\" width=\"336\" height=\"336\" rx=\"57\" ry=\"57\"></rect><path d=\"M383.5,128l.5-24a56.16,56.16,0,0,0-56-56H112a64.19,64.19,0,0,0-64,64V328a56.16,56.16,0,0,0,56,56h24\"></path></svg>`;\n      const xmlDom = new DOMParser().parseFromString(xmlString, 'application/xml');\n      const svgDom = qrcodeTooltipTemp.ownerDocument.importNode(xmlDom.documentElement, true);\n      svgDom.style.marginLeft = `clamp(1px, ${widthZoom * fontSize - 10}px, 3px)`; // left - right\n      qrcodeTooltipTemp.appendChild(svgDom);\n      svgDom.addEventListener(\"click\", () => window.navigator['clipboard'].writeText(_code.value));\n      qrcodeTooltipTemp.addEventListener(\"click\", () => window.navigator['clipboard'].writeText(_code.value));\n      // Tooltip box\n      const qrcodeTooltip = document.createElement('div');\n      qrcodeTooltip.setAttribute('class', 'qrcode-tooltip');\n      qrcodeTooltip.appendChild(qrcodeTooltipTemp);\n      heightZoom = imgHeight / oriHeight;\n      widthZoom = imgHeight * oriWHRatio / oriWidth;\n      qrcodeTooltip.style.fontSize = widthZoom * fontSize + 'px';\n      qrcodeTooltip.style.top = minY * heightZoom + \"px\";\n      qrcodeTooltip.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + \"px\";\n      qrcodeTooltip.style.width = (maxX - minX) * heightZoom + \"px\";\n      qrcodeTooltip.style.height = (maxY - minY) * heightZoom + \"px\";\n      // Result text\n      const resultText = document.createElement('span');\n      resultText.innerText = _code.value;\n      // Set position result text\n      resultText.style.top = minY * heightZoom + -20 * heightZoom + \"px\";\n      resultText.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + \"px\";\n      // Style text\n      const ff = canvasStyles[1]?.font?.split(' ')?.[1];\n      resultText.style.fontFamily = ff;\n      resultText.style.fontSize = widthZoom * fontSize + 'px';\n      resultText.style.color = canvasStyles?.[1]?.fillStyle;\n      elTarget?.appendChild(qrcodeTooltip);\n      elTarget?.appendChild(resultText);\n    }\n    elTarget?.appendChild(cvs);\n  }\n  ;\n};\n/**\n * DRAW_RESULT_ON_CANVAS\n * @param code\n * @param cvs\n * @param canvasStyles\n */\nconst DRAW_RESULT_ON_CANVAS = (code, cvs, canvasStyles) => {\n  let ctx = cvs.getContext('2d', {\n    willReadFrequently: true\n  });\n  for (let i = 0; i < code.length; i++) {\n    const _code = code[i];\n    let loc = {};\n    let X = [];\n    let Y = [];\n    let fontSize = 0;\n    const fs = canvasStyles[1]?.font?.split(' ')?.[0];\n    let num = fs?.replace(/[^0-9]/g, '');\n    if (num && /[0-9]/g.test(num)) {\n      fontSize = parseFloat(num);\n    }\n    // Point x,y\n    const points = _code.points;\n    for (let j = 0; j < points.length; j++) {\n      const xj = points?.[j]?.x ?? 0;\n      const yj = points?.[j]?.y ?? 0;\n      loc[`x${j + 1}`] = xj;\n      loc[`y${j + 1}`] = yj;\n      X.push(xj);\n      Y.push(yj);\n    }\n    // Min max\n    let minX = Math.min(...X);\n    let minY = Math.min(...Y);\n    const styleLayer = () => {\n      for (const key in canvasStyles[0]) {\n        ctx[key] = canvasStyles[0][key];\n      }\n      // polygon [x,y, x,y, x,y.....];\n      const polygon = [];\n      for (let k = 0; k < X.length; k++) {\n        polygon.push(loc[`x${k + 1}`]);\n        polygon.push(loc[`y${k + 1}`]);\n      }\n      // Copy array\n      const shape = polygon.slice(0);\n      // Draw polygon\n      ctx.beginPath();\n      ctx.moveTo(shape.shift(), shape.shift());\n      while (shape.length) {\n        ctx.lineTo(shape.shift(), shape.shift()); //x,y\n      }\n\n      ctx.closePath();\n      ctx.fill();\n      ctx.stroke();\n    };\n    let cvs2 = document.createElement('canvas');\n    const styleText = () => {\n      const ff = canvasStyles[1]?.font?.split(' ')?.[1];\n      cvs2.height = cvs.height;\n      cvs2.width = cvs.width;\n      let ctx2 = cvs2.getContext('2d', {\n        willReadFrequently: true\n      });\n      ctx2.font = fontSize + `px ` + ff;\n      for (const key in canvasStyles[1]) {\n        ctx2[key] = canvasStyles[1][key];\n      }\n      FILL_TEXT_MULTI_LINE(ctx2, _code.value, minX, minY - 5);\n    };\n    styleLayer();\n    styleText();\n    // Merge cvs2 into cvs\n    ctx.drawImage(cvs2, 0, 0);\n  }\n  ;\n};\n/**\n * READ_AS_DATA_URL\n * @param file\n * @param configs\n * @returns\n */\nconst READ_AS_DATA_URL = (file, configs) => {\n  /** overrides **/\n  let decode = configs?.decode ?? CONFIG_DEFAULT.decode;\n  let canvasStyles = configs?.canvasStyles?.length === 2 ? configs?.canvasStyles : [CANVAS_STYLES_LAYER, CANVAS_STYLES_TEXT];\n  let isBeep = configs?.isBeep ?? CONFIG_DEFAULT.isBeep;\n  /** drawImage **/\n  return new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.onload = () => {\n      const objectFile = {\n        name: file.name,\n        file: file,\n        url: URL.createObjectURL(file)\n      };\n      // Set the src of this Image object.\n      const image = new Image();\n      // Setting cross origin value to anonymous\n      image.setAttribute('crossOrigin', 'anonymous');\n      // When our image has loaded.\n      image.onload = /*#__PURE__*/_asyncToGenerator(function* () {\n        // Get the canvas element by using the getElementById method.\n        const canvas = document.createElement('canvas');\n        // HTMLImageElement size\n        canvas.width = image.naturalWidth || image.width;\n        canvas.height = image.naturalHeight || image.height;\n        // Get a 2D drawing context for the canvas.\n        const ctx = canvas.getContext('2d');\n        // Draw image\n        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n        // Data image\n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        // Scanner\n        if (WASM_READY()) {\n          const code = yield zbarWasm.scanImageData(imageData);\n          if (code?.length) {\n            // Decode\n            code.forEach(s => s.value = s.decode(decode?.toLocaleLowerCase()));\n            // Overlay\n            DRAW_RESULT_ON_CANVAS(code, canvas, canvasStyles);\n            // Emit object\n            const blob = yield CANVAS_TO_BLOB(canvas);\n            const url = URL.createObjectURL(blob);\n            const blobToFile = (theBlob, fileName) => new File([theBlob], fileName, {\n              lastModified: new Date().getTime(),\n              type: theBlob.type\n            });\n            resolve(Object.assign({}, objectFile, {\n              data: code,\n              url: url,\n              canvas: canvas,\n              file: blobToFile(blob, objectFile.name)\n            }));\n            PLAY_AUDIO(isBeep);\n          } else {\n            resolve(Object.assign({}, objectFile, {\n              data: code,\n              canvas: canvas\n            }));\n          }\n        }\n      });\n      // Set src\n      image.src = objectFile.url;\n    };\n    fileReader.onerror = error => reject(error);\n    fileReader.readAsDataURL(file);\n  });\n};\n/**\n * Convert canvas to blob\n * canvas.toBlob((blob) => { .. }, 'image/jpeg', 0.95); // JPEG at 95% quality\n * @param canvas\n * @param type\n * @returns\n */\nconst CANVAS_TO_BLOB = (canvas, type) => {\n  return new Promise((resolve, reject) => canvas.toBlob(blob => resolve(blob), type));\n};\n/**\n * Convert blob to file\n * @param theBlob\n * @param fileName\n * @returns\n */\nconst BLOB_TO_FILE = (theBlob, fileName) => {\n  return new File([theBlob], fileName, {\n    lastModified: new Date().getTime(),\n    type: theBlob.type\n  });\n};\n/**\n * FILES_TO_SCAN\n * @param files\n * @param configs\n * @param quality\n * @param type\n * @param as\n * @returns\n */\nconst FILES_TO_SCAN = (files = [], configs, quality, type, as = new AsyncSubject()) => {\n  COMPRESS_IMAGE_FILE(files, quality, type).then(_files => {\n    Promise.all(Object.assign([], files).map(m => READ_AS_DATA_URL(m, configs))).then(img => {\n      AS_COMPLETE(as, img);\n    }).catch(error => AS_COMPLETE(as, null, error));\n  });\n  return as;\n};\n/**\n * FILL_TEXT_MULTI_LINE\n * @param ctx\n * @param text\n * @param x\n * @param y\n */\nconst FILL_TEXT_MULTI_LINE = (ctx, text, x, y) => {\n  let lineHeight = ctx.measureText(\"M\").width * 1.2;\n  let lines = text.split(\"\\n\");\n  for (var i = 0; i < lines.length; ++i) {\n    ctx.fillText(lines[i], x, y);\n    ctx.strokeText(lines[i], x, y);\n    y += lineHeight;\n  }\n};\n/**\n * COMPRESS_IMAGE_FILE\n * @param files\n * @param quality\n * @param type\n * @returns\n */\nconst COMPRESS_IMAGE_FILE = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(function* (files = [], quality = 0.5, type = \"image/jpeg\") {\n    // No files selected\n    if (!files.length || quality === 1) return files;\n    const compressImage = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(function* (file) {\n        // Get as image data\n        const imageBitmap = yield createImageBitmap(file);\n        // Draw to canvas\n        const canvas = document.createElement('canvas');\n        canvas.width = imageBitmap.width;\n        canvas.height = imageBitmap.height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(imageBitmap, 0, 0);\n        // Turn into Blob\n        const blob = yield new Promise(resolve => canvas.toBlob(resolve, type, quality));\n        // Turn Blob into File\n        return new File([blob], file.name, {\n          type: blob.type\n        });\n      });\n      return function compressImage(_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    // We'll store the files in this data transfer object\n    const dataTransfer = new DataTransfer();\n    // For every file in the files list\n    yield _asyncToGenerator(function* () {\n      for (const file of files) {\n        // We don't have to compress files that aren't images\n        if (!file.type.startsWith('image')) {\n          // Ignore this file, but do add it to our result\n          dataTransfer.items.add(file);\n          continue;\n        }\n        // We compress the file by 50%\n        const compressedFile = yield compressImage(file);\n        // Save back the compressed file instead of the original file\n        dataTransfer.items.add(compressedFile);\n      }\n    })();\n    // return value new files list\n    return dataTransfer.files;\n  });\n  return function COMPRESS_IMAGE_FILE() {\n    return _ref2.apply(this, arguments);\n  };\n}();\n/**\n * REMOVE_RESULT_PANEL\n * @param element\n */\nconst REMOVE_RESULT_PANEL = element => {\n  // clear text result and tooltip\n  Object.assign([], element.childNodes).forEach(el => element.removeChild(el));\n};\n/**\n * RESET_CANVAS\n * @param canvas\n */\nconst RESET_CANVAS = canvas => {\n  // reset canvas\n  const context = canvas.getContext('2d', {\n    willReadFrequently: true\n  });\n  // clear frame when reloop\n  context.clearRect(0, 0, canvas.width, canvas.height);\n};\n/**\n * UPDATE_WIDTH_HEIGHT_VIDEO\n * @param video\n * @param canvas\n */\nconst UPDATE_WIDTH_HEIGHT_VIDEO = (video, canvas) => {\n  video.style.width = canvas.offsetWidth + 'px';\n  video.style.height = canvas.offsetHeight + 'px';\n};\n/**\n * VIBRATE\n * @param time\n */\nconst VIBRATE = (time = 300) => {\n  time && IS_MOBILE() && window?.navigator?.vibrate(time);\n};\n/**\n * IS_MOBILE\n * @returns\n */\nconst IS_MOBILE = () => {\n  const vendor = navigator.userAgent || navigator['vendor'] || window['opera'];\n  const phone = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\n  const version = /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;\n  const isSafari = /^((?!chrome|android).)*safari/i;\n  return !!(phone.test(vendor) || version.test(vendor.substr(0, 4))) && !isSafari.test(vendor);\n};\nclass NgxScannerQrcodeService {\n  /**\n   * loadFiles\n   * @param files\n   * @param quality\n   * @param type\n   * @returns\n   */\n  loadFiles(files = [], quality, type) {\n    const as = new AsyncSubject();\n    COMPRESS_IMAGE_FILE(files, quality, type).then(_files => {\n      Promise.all(Object.assign([], files).map(m => this.readAsDataURL(m))).then(img => AS_COMPLETE(as, img)).catch(error => AS_COMPLETE(as, null, error));\n    });\n    return as;\n  }\n  /**\n   * loadFilesToScan\n   * @param files\n   * @param config\n   * @param quality\n   * @param type\n   * @returns\n   */\n  loadFilesToScan(files = [], config, quality, type) {\n    return FILES_TO_SCAN(files, config, quality, type);\n  }\n  /**\n   * readAsDataURL\n   * @param file\n   * @returns\n   */\n  readAsDataURL(file) {\n    /** drawImage **/\n    return new Promise((resolve, reject) => {\n      const fileReader = new FileReader();\n      fileReader.onload = () => {\n        const objectFile = {\n          name: file.name,\n          file: file,\n          url: URL.createObjectURL(file)\n        };\n        resolve(objectFile);\n      };\n      fileReader.onerror = error => reject(error);\n      fileReader.readAsDataURL(file);\n    });\n  }\n}\nNgxScannerQrcodeService.ɵfac = function NgxScannerQrcodeService_Factory(t) {\n  return new (t || NgxScannerQrcodeService)();\n};\nNgxScannerQrcodeService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: NgxScannerQrcodeService,\n  factory: NgxScannerQrcodeService.ɵfac,\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxScannerQrcodeService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\n\n/**\n * LOAD_WASM\n * @param as\n * @param renderer\n * @returns\n */\nconst LOAD_WASM = (as = new AsyncSubject(), renderer) => {\n  let retry = 0;\n  const LOAD_WASM_RETRY = (isLoadWasmRemote = false) => {\n    const DONE = () => {\n      let timeoutId;\n      try {\n        const L = () => {\n          clearTimeout(timeoutId);\n          WASM_READY() ? setTimeout(() => AS_COMPLETE(as, true)) : timeoutId = setTimeout(() => L());\n        };\n        setTimeout(() => L());\n        setTimeout(() => clearTimeout(timeoutId), 3000);\n      } catch (error) {\n        clearTimeout(timeoutId);\n      }\n    };\n    const scriptRemote = document.querySelectorAll(`script[src=\"${WASMREMOTE}\"]`);\n    const scriptRemoteLatest = document.querySelectorAll(`script[src=\"${WASMREMOTELATEST}\"]`);\n    if (scriptRemote.length || scriptRemoteLatest.length) {\n      DONE();\n    } else {\n      const scriptProject = document.querySelectorAll(`script[src=\"${WASMPROJECT}\"]`);\n      if (scriptProject.length === 1) {\n        DONE();\n      } else {\n        scriptProject.forEach(f => f.remove());\n        if (renderer) {\n          const script = renderer.createElement(\"script\");\n          renderer.setAttribute(script, \"src\", isLoadWasmRemote ? WASMREMOTE : WASMPROJECT);\n          renderer.setAttribute(script, \"type\", \"text/javascript\");\n          renderer.setAttribute(script, \"async\", \"\");\n          renderer.appendChild(document.head, script);\n          script.onload = () => DONE();\n          script.onerror = () => {\n            if (retry < 2) {\n              document.head.removeChild(script);\n              LOAD_WASM_RETRY(true);\n            } else {\n              AS_COMPLETE(as, false, 'Could not load script ' + isLoadWasmRemote ? WASMREMOTE : WASMPROJECT);\n            }\n          };\n          retry += 1;\n        } else {\n          const mod = document.createElement('script');\n          mod.setAttribute(\"src\", isLoadWasmRemote ? WASMREMOTE : WASMPROJECT);\n          mod.setAttribute(\"type\", \"text/javascript\");\n          mod.setAttribute(\"async\", \"\");\n          document.head.appendChild(mod);\n          mod.onload = () => DONE();\n          mod.onerror = () => {\n            if (retry < 2) {\n              document.head.removeChild(mod);\n              LOAD_WASM_RETRY(true);\n            } else {\n              AS_COMPLETE(as, false, 'Could not load script ' + isLoadWasmRemote ? WASMREMOTE : WASMPROJECT);\n            }\n          };\n          retry += 1;\n        }\n      }\n    }\n  };\n  LOAD_WASM_RETRY();\n  return as;\n};\nclass NgxScannerQrcodeComponent {\n  constructor(renderer, elementRef) {\n    this.renderer = renderer;\n    this.elementRef = elementRef;\n    /**\n     * EventEmitter\n     */\n    this.event = new EventEmitter();\n    /**\n     * Input\n     */\n    this.src = CONFIG_DEFAULT.src;\n    this.fps = CONFIG_DEFAULT.fps;\n    this.vibrate = CONFIG_DEFAULT.vibrate;\n    this.decode = CONFIG_DEFAULT.decode;\n    this.isBeep = CONFIG_DEFAULT.isBeep;\n    this.config = CONFIG_DEFAULT;\n    this.constraints = CONFIG_DEFAULT.constraints;\n    this.canvasStyles = [CANVAS_STYLES_LAYER, CANVAS_STYLES_TEXT];\n    /**\n     * Export\n    */\n    this.isStart = false;\n    this.isPause = false;\n    this.isLoading = false;\n    this.isTorch = false;\n    this.data = new BehaviorSubject([]);\n    this.devices = new BehaviorSubject([]);\n    this.deviceIndexActive = 0;\n    this.dataForResize = [];\n    this.ready = new AsyncSubject();\n    this.STATUS = {\n      startON: () => this.isStart = true,\n      pauseON: () => this.isPause = true,\n      loadingON: () => this.isLoading = true,\n      startOFF: () => this.isStart = false,\n      pauseOFF: () => this.isPause = false,\n      loadingOFF: () => this.isLoading = false,\n      torchOFF: () => this.isTorch = false\n    };\n  }\n  ngOnInit() {\n    this.overrideConfig();\n    LOAD_WASM(this.ready, this.renderer).subscribe(() => {\n      if (this.src) {\n        this.loadImage(this.src);\n      }\n      this.resize();\n    });\n  }\n  /**\n   * start\n   * @param playDeviceCustom\n   * @returns\n   */\n  start(playDeviceCustom) {\n    const as = new AsyncSubject();\n    if (this.isStart) {\n      // Reject\n      AS_COMPLETE(as, false);\n    } else {\n      // fix safari\n      this.safariWebRTC(as, playDeviceCustom);\n    }\n    return as;\n  }\n  /**\n   * stop\n   * @returns\n   */\n  stop() {\n    this.STATUS.pauseOFF();\n    this.STATUS.startOFF();\n    this.STATUS.torchOFF();\n    this.STATUS.loadingOFF();\n    const as = new AsyncSubject();\n    try {\n      clearTimeout(this.rAF_ID);\n      this.video.nativeElement.srcObject.getTracks().forEach(track => {\n        track.stop();\n        AS_COMPLETE(as, true);\n      });\n      this.dataForResize = [];\n      RESET_CANVAS(this.canvas.nativeElement);\n      REMOVE_RESULT_PANEL(this.resultsPanel.nativeElement);\n    } catch (error) {\n      AS_COMPLETE(as, false, error);\n    }\n    return as;\n  }\n  /**\n   * play\n   * @returns\n   */\n  play() {\n    const as = new AsyncSubject();\n    if (this.isPause) {\n      this.video.nativeElement.play();\n      this.STATUS.pauseOFF();\n      this.requestAnimationFrame();\n      AS_COMPLETE(as, true);\n    } else {\n      AS_COMPLETE(as, false);\n    }\n    return as;\n  }\n  /**\n   * pause\n   * @returns\n   */\n  pause() {\n    const as = new AsyncSubject();\n    if (this.isStart) {\n      clearTimeout(this.rAF_ID);\n      this.video.nativeElement.pause();\n      this.STATUS.pauseON();\n      AS_COMPLETE(as, true);\n    } else {\n      AS_COMPLETE(as, false);\n    }\n    return as;\n  }\n  /**\n   * playDevice\n   * @param deviceId\n   * @param as\n   * @returns\n   */\n  playDevice(deviceId, as = new AsyncSubject()) {\n    const constraints = this.getConstraints();\n    const existDeviceId = this.isStart && constraints ? constraints.deviceId !== deviceId : true;\n    switch (true) {\n      case deviceId === 'null' || deviceId === 'undefined' || !deviceId:\n        stop();\n        this.stop();\n        AS_COMPLETE(as, false);\n        break;\n      case deviceId && existDeviceId:\n        stop();\n        this.stop();\n        // Loading on\n        this.STATUS.loadingON();\n        this.deviceIndexActive = this.devices.value.findIndex(f => f.deviceId === deviceId);\n        const constraints = {\n          ...this.constraints,\n          audio: false,\n          video: {\n            deviceId: deviceId,\n            ...this.constraints.video\n          }\n        };\n        // MediaStream\n        navigator.mediaDevices.getUserMedia(constraints).then(stream => {\n          this.video.nativeElement.srcObject = stream;\n          this.video.nativeElement.onloadedmetadata = () => {\n            this.video.nativeElement.play();\n            this.requestAnimationFrame();\n            AS_COMPLETE(as, true);\n            this.STATUS.startON();\n            this.STATUS.loadingOFF();\n          };\n        }).catch(error => {\n          this.eventEmit(false);\n          AS_COMPLETE(as, false, error);\n          this.STATUS.startOFF();\n          this.STATUS.loadingOFF();\n        });\n        break;\n      default:\n        AS_COMPLETE(as, false);\n        this.STATUS.loadingOFF();\n        break;\n    }\n    return as;\n  }\n  /**\n   * loadImage\n   * @param src\n   * @returns\n   */\n  loadImage(src) {\n    const as = new AsyncSubject();\n    // Loading on\n    this.STATUS.startOFF();\n    this.STATUS.loadingON();\n    // Set the src of this Image object.\n    const image = new Image();\n    // Setting cross origin value to anonymous\n    image.setAttribute('crossOrigin', 'anonymous');\n    // When our image has loaded.\n    image.onload = () => {\n      WASM_READY() && this.drawImage(image, flag => {\n        AS_COMPLETE(as, flag);\n        this.STATUS.startOFF();\n        this.STATUS.loadingOFF();\n      });\n    };\n    // Set src\n    image.src = src;\n    return as;\n  }\n  /**\n   * torcher\n   * @returns\n   */\n  torcher() {\n    const as = this.applyConstraints({\n      advanced: [{\n        torch: this.isTorch\n      }]\n    });\n    as.subscribe(() => false, () => this.isTorch = !this.isTorch);\n    return as;\n  }\n  /**\n   * applyConstraints\n   * @param constraints\n   * @param deviceIndex\n   * @returns\n   */\n  applyConstraints(constraints, deviceIndex = 0) {\n    var _this = this;\n    const as = new AsyncSubject();\n    if (this.isStart) {\n      const stream = this.video.nativeElement.srcObject;\n      if (deviceIndex !== null || deviceIndex !== undefined || !Number.isNaN(deviceIndex)) {\n        const videoTrack = stream.getVideoTracks()[deviceIndex];\n        const imageCapture = new window.ImageCapture(videoTrack);\n        imageCapture.getPhotoCapabilities().then( /*#__PURE__*/_asyncToGenerator(function* () {\n          yield videoTrack.applyConstraints(constraints);\n          UPDATE_WIDTH_HEIGHT_VIDEO(_this.video.nativeElement, _this.canvas.nativeElement);\n          AS_COMPLETE(as, true);\n        })).catch(error => {\n          switch (error?.name) {\n            case 'NotFoundError':\n            case 'DevicesNotFoundError':\n              AS_COMPLETE(as, false, 'Required track is missing');\n              break;\n            case 'NotReadableError':\n            case 'TrackStartError':\n              AS_COMPLETE(as, false, 'Webcam or mic are already in use');\n              break;\n            case 'OverconstrainedError':\n            case 'ConstraintNotSatisfiedError':\n              AS_COMPLETE(as, false, 'Constraints can not be satisfied by avb. devices');\n              break;\n            case 'NotAllowedError':\n            case 'PermissionDeniedError':\n              AS_COMPLETE(as, false, 'Permission denied in browser');\n              break;\n            case 'TypeError':\n              AS_COMPLETE(as, false, 'Empty constraints object');\n              break;\n            default:\n              AS_COMPLETE(as, false, error);\n              break;\n          }\n        });\n      } else {\n        AS_COMPLETE(as, false, 'Please check again deviceIndex');\n      }\n    } else {\n      AS_COMPLETE(as, false, 'Please start the scanner');\n    }\n    return as;\n  }\n  /**\n   * getConstraints\n   * @param deviceIndex\n   * @returns\n   */\n  getConstraints(deviceIndex = 0) {\n    const stream = this.video.nativeElement.srcObject;\n    const videoTrack = stream?.getVideoTracks()[deviceIndex];\n    return videoTrack?.getConstraints();\n  }\n  /**\n   * download\n   * @param fileName\n   * @param quality\n   * @param type\n   * @returns\n   */\n  download(fileName = `ngx_scanner_qrcode_${Date.now()}.png`, quality, type) {\n    var _this2 = this;\n    const as = new AsyncSubject();\n    _asyncToGenerator(function* () {\n      const blob = yield CANVAS_TO_BLOB(_this2.canvas.nativeElement);\n      const file = BLOB_TO_FILE(blob, fileName);\n      FILES_TO_SCAN([file], _this2.config, quality, type, as).subscribe(res => {\n        res.forEach(item => {\n          if (item?.data?.length) {\n            const link = document.createElement('a');\n            link.href = item.url;\n            link.download = item.name;\n            link.click();\n            link.remove();\n          }\n        });\n      });\n    })();\n    return as;\n  }\n  /**\n   * resize\n   */\n  resize() {\n    window.addEventListener(\"resize\", () => {\n      DRAW_RESULT_APPEND_CHILD(this.dataForResize, this.canvas.nativeElement, this.resultsPanel.nativeElement, this.canvasStyles);\n      UPDATE_WIDTH_HEIGHT_VIDEO(this.video.nativeElement, this.canvas.nativeElement);\n    });\n  }\n  /**\n   * overrideConfig\n   */\n  overrideConfig() {\n    if ('src' in this.config) this.src = this.config.src;\n    if ('fps' in this.config) this.fps = this.config.fps;\n    if ('vibrate' in this.config) this.vibrate = this.config.vibrate;\n    if ('decode' in this.config) this.decode = this.config.decode;\n    if ('isBeep' in this.config) this.isBeep = this.config.isBeep;\n    if ('constraints' in this.config) this.constraints = OVERRIDES('constraints', this.config, MEDIA_STREAM_DEFAULT);\n    if ('canvasStyles' in this.config && this.config?.canvasStyles?.length === 2) this.canvasStyles = this.config.canvasStyles;\n  }\n  /**\n   * safariWebRTC\n   * Fix issue on safari\n   * https://webrtchacks.com/guide-to-safari-webrtc\n   * @param as\n   * @param playDeviceCustom\n   */\n  safariWebRTC(as, playDeviceCustom) {\n    // Loading on\n    this.STATUS.startOFF();\n    this.STATUS.loadingON();\n    navigator.mediaDevices.getUserMedia(this.constraints).then(stream => {\n      stream.getTracks().forEach(track => track.stop());\n      this.loadAllDevices(as, playDeviceCustom);\n    }).catch(error => {\n      AS_COMPLETE(as, false, error);\n      this.STATUS.startOFF();\n      this.STATUS.loadingOFF();\n    });\n  }\n  /**\n   * loadAllDevices\n   * @param as\n   * @param playDeviceCustom\n   */\n  loadAllDevices(as, playDeviceCustom) {\n    navigator.mediaDevices.enumerateDevices().then(devices => {\n      let cameraDevices = devices.filter(f => f.kind == 'videoinput');\n      this.devices.next(cameraDevices);\n      if (cameraDevices?.length > 0) {\n        AS_COMPLETE(as, cameraDevices);\n        playDeviceCustom ? playDeviceCustom(cameraDevices) : this.playDevice(cameraDevices[0].deviceId);\n      } else {\n        AS_COMPLETE(as, false, 'No camera detected.');\n        this.STATUS.startOFF();\n        this.STATUS.loadingOFF();\n      }\n    }).catch(error => {\n      AS_COMPLETE(as, false, error);\n      this.STATUS.startOFF();\n      this.STATUS.loadingOFF();\n    });\n  }\n  /**\n   * drawImage\n   * @param element\n   * @param callback\n   */\n  drawImage(element, callback = () => {}) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      // Get the canvas element by using the getElementById method.\n      const canvas = _this3.canvas.nativeElement;\n      // Get a 2D drawing context for the canvas.\n      const ctx = canvas.getContext('2d', {\n        willReadFrequently: true\n      });\n      // HTMLImageElement size\n      if (element instanceof HTMLImageElement) {\n        canvas.width = element.naturalWidth;\n        canvas.height = element.naturalHeight;\n        element.style.visibility = '';\n        _this3.video.nativeElement.style.visibility = 'hidden';\n        // Image center and auto scale\n        _this3.renderer.setStyle(_this3.elementRef.nativeElement, 'width', canvas.width + 'px');\n        _this3.renderer.setStyle(_this3.elementRef.nativeElement, 'maxWidth', 100 + '%');\n        _this3.renderer.setStyle(_this3.elementRef.nativeElement, 'display', 'inline-block');\n      }\n      // HTMLVideoElement size\n      if (element instanceof HTMLVideoElement) {\n        canvas.width = element.videoWidth;\n        canvas.height = element.videoHeight;\n        element.style.visibility = '';\n        _this3.canvas.nativeElement.style.visibility = 'hidden';\n      }\n      // Set width, height for video element\n      UPDATE_WIDTH_HEIGHT_VIDEO(_this3.video.nativeElement, canvas);\n      // clear frame\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      // Draw image\n      ctx.drawImage(element, 0, 0, canvas.width, canvas.height);\n      // Data image\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      // Draw frame\n      const code = yield zbarWasm.scanImageData(imageData);\n      if (code?.length) {\n        // Decode\n        code.forEach(s => s.value = s.decode(_this3.decode?.toLocaleLowerCase()));\n        // Overlay\n        DRAW_RESULT_APPEND_CHILD(code, Object.freeze(_this3.canvas.nativeElement), _this3.resultsPanel.nativeElement, _this3.canvasStyles);\n        // To blob and emit data\n        const EMIT_DATA = () => {\n          _this3.eventEmit(code);\n          _this3.dataForResize = code;\n        };\n        // HTMLImageElement\n        if (element instanceof HTMLImageElement) {\n          callback(true);\n          EMIT_DATA();\n          VIBRATE(_this3.vibrate);\n          PLAY_AUDIO(_this3.isBeep);\n        }\n        // HTMLVideoElement\n        if (element instanceof HTMLVideoElement) {\n          EMIT_DATA();\n          VIBRATE(_this3.vibrate);\n          PLAY_AUDIO(_this3.isBeep);\n        }\n      } else {\n        callback(false);\n        REMOVE_RESULT_PANEL(_this3.resultsPanel.nativeElement);\n        _this3.dataForResize = [];\n      }\n    })();\n  }\n  /**\n   * eventEmit\n   * @param response\n   */\n  eventEmit(response = false) {\n    response !== false && this.data.next(response || []);\n    response !== false && this.event.emit(response || []);\n  }\n  /**\n   * Single-thread\n   * Loop Recording on Camera\n   * Must be destroy request\n   * Not using: requestAnimationFrame\n   * @param delay\n   */\n  requestAnimationFrame(delay = 100) {\n    try {\n      clearTimeout(this.rAF_ID);\n      this.rAF_ID = setTimeout(() => {\n        if (this.video.nativeElement.readyState === this.video.nativeElement.HAVE_ENOUGH_DATA) {\n          delay = 0; // Appy first request\n          WASM_READY() && this.drawImage(this.video.nativeElement);\n          this.isStart && !this.isPause && this.requestAnimationFrame(delay);\n        }\n      }, /*avoid cache mediaStream*/delay || this.fps);\n    } catch (error) {\n      clearTimeout(this.rAF_ID);\n    }\n  }\n  /**\n   * isReady\n   */\n  get isReady() {\n    return this.ready;\n  }\n  ngOnDestroy() {\n    this.pause();\n  }\n}\nNgxScannerQrcodeComponent.ɵfac = function NgxScannerQrcodeComponent_Factory(t) {\n  return new (t || NgxScannerQrcodeComponent)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\nNgxScannerQrcodeComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NgxScannerQrcodeComponent,\n  selectors: [[\"ngx-scanner-qrcode\"]],\n  viewQuery: function NgxScannerQrcodeComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(_c2, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.video = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.resultsPanel = _t.first);\n    }\n  },\n  hostAttrs: [1, \"ngx-scanner-qrcode\"],\n  inputs: {\n    src: \"src\",\n    fps: \"fps\",\n    vibrate: \"vibrate\",\n    decode: \"decode\",\n    isBeep: \"isBeep\",\n    config: \"config\",\n    constraints: \"constraints\",\n    canvasStyles: \"canvasStyles\"\n  },\n  outputs: {\n    event: \"event\"\n  },\n  exportAs: [\"scanner\"],\n  decls: 6,\n  vars: 0,\n  consts: [[1, \"origin-overlay\"], [\"resultsPanel\", \"\"], [1, \"origin-canvas\"], [\"canvas\", \"\"], [\"playsinline\", \"\", 1, \"origin-video\"], [\"video\", \"\"]],\n  template: function NgxScannerQrcodeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"div\", 0, 1)(2, \"canvas\", 2, 3)(4, \"video\", 4, 5);\n    }\n  },\n  styles: [\".ngx-scanner-qrcode{display:block;position:relative}.origin-overlay{width:100%;position:absolute}.origin-overlay span{z-index:2;text-align:left;position:absolute}.origin-overlay .qrcode-polygon{z-index:1;position:absolute}.origin-canvas{width:100%;position:absolute}.origin-video{width:100%;background-color:#262626}.qrcode-tooltip{z-index:3;position:absolute}.qrcode-tooltip:hover .qrcode-tooltip-temp{display:block;position:absolute;cursor:copy}.qrcode-tooltip:hover .qrcode-tooltip-temp:active{color:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp{bottom:0;left:50%;color:#fff;text-align:left;display:none;width:max-content;word-wrap:break-word;transform:translate(-50%);transform-style:preserve-3d;background-color:#000000d0;box-shadow:1px 1px 20px #000000e0}.qrcode-tooltip .qrcode-tooltip-temp svg{cursor:pointer}.qrcode-tooltip .qrcode-tooltip-temp svg rect{fill:none;stroke:#fff;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg path{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg:active rect{stroke:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp svg:active path{stroke:#afafaf}\\n\"],\n  encapsulation: 2\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxScannerQrcodeComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-scanner-qrcode',\n      template: `<div #resultsPanel class=\"origin-overlay\"></div><canvas #canvas class=\"origin-canvas\"></canvas><video #video playsinline class=\"origin-video\"></video>`,\n      host: {\n        'class': 'ngx-scanner-qrcode'\n      },\n      exportAs: 'scanner',\n      inputs: ['src', 'fps', 'vibrate', 'decode', 'isBeep', 'config', 'constraints', 'canvasStyles'],\n      outputs: ['event'],\n      queries: {\n        video: new ViewChild('video'),\n        canvas: new ViewChild('canvas'),\n        resultsPanel: new ViewChild('resultsPanel')\n      },\n      encapsulation: ViewEncapsulation.None,\n      styles: [\".ngx-scanner-qrcode{display:block;position:relative}.origin-overlay{width:100%;position:absolute}.origin-overlay span{z-index:2;text-align:left;position:absolute}.origin-overlay .qrcode-polygon{z-index:1;position:absolute}.origin-canvas{width:100%;position:absolute}.origin-video{width:100%;background-color:#262626}.qrcode-tooltip{z-index:3;position:absolute}.qrcode-tooltip:hover .qrcode-tooltip-temp{display:block;position:absolute;cursor:copy}.qrcode-tooltip:hover .qrcode-tooltip-temp:active{color:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp{bottom:0;left:50%;color:#fff;text-align:left;display:none;width:max-content;word-wrap:break-word;transform:translate(-50%);transform-style:preserve-3d;background-color:#000000d0;box-shadow:1px 1px 20px #000000e0}.qrcode-tooltip .qrcode-tooltip-temp svg{cursor:pointer}.qrcode-tooltip .qrcode-tooltip-temp svg rect{fill:none;stroke:#fff;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg path{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg:active rect{stroke:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp svg:active path{stroke:#afafaf}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.Renderer2\n    }, {\n      type: i0.ElementRef\n    }];\n  }, null);\n})();\nvar ScannerQRCodeSymbolType;\n(function (ScannerQRCodeSymbolType) {\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_NONE\"] = 0] = \"ScannerQRCode_NONE\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_PARTIAL\"] = 1] = \"ScannerQRCode_PARTIAL\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_EAN2\"] = 2] = \"ScannerQRCode_EAN2\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_EAN5\"] = 5] = \"ScannerQRCode_EAN5\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_EAN8\"] = 8] = \"ScannerQRCode_EAN8\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_UPCE\"] = 9] = \"ScannerQRCode_UPCE\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_ISBN10\"] = 10] = \"ScannerQRCode_ISBN10\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_UPCA\"] = 12] = \"ScannerQRCode_UPCA\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_EAN13\"] = 13] = \"ScannerQRCode_EAN13\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_ISBN13\"] = 14] = \"ScannerQRCode_ISBN13\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_COMPOSITE\"] = 15] = \"ScannerQRCode_COMPOSITE\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_I25\"] = 25] = \"ScannerQRCode_I25\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_DATABAR\"] = 34] = \"ScannerQRCode_DATABAR\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_DATABAR_EXP\"] = 35] = \"ScannerQRCode_DATABAR_EXP\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_CODABAR\"] = 38] = \"ScannerQRCode_CODABAR\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_CODE39\"] = 39] = \"ScannerQRCode_CODE39\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_PDF417\"] = 57] = \"ScannerQRCode_PDF417\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_QRCODE\"] = 64] = \"ScannerQRCode_QRCODE\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_SQCODE\"] = 80] = \"ScannerQRCode_SQCODE\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_CODE93\"] = 93] = \"ScannerQRCode_CODE93\";\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_CODE128\"] = 128] = \"ScannerQRCode_CODE128\";\n  /*\n   * Please see _ScannerQRCode_get_symbol_hash() if adding\n   * anything after 128\n   */\n  /** mask for base symbol type.\n   * @deprecated in 0.11, remove this from existing code\n   */\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_SYMBOL\"] = 255] = \"ScannerQRCode_SYMBOL\";\n  /** 2-digit add-on flag.\n   * @deprecated in 0.11, a ::ScannerQRCode_EAN2 component is used for\n   * 2-digit GS1 add-ons\n   */\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_ADDON2\"] = 512] = \"ScannerQRCode_ADDON2\";\n  /** 5-digit add-on flag.\n   * @deprecated in 0.11, a ::ScannerQRCode_EAN5 component is used for\n   * 5-digit GS1 add-ons\n   */\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_ADDON5\"] = 1280] = \"ScannerQRCode_ADDON5\";\n  /** add-on flag mask.\n   * @deprecated in 0.11, GS1 add-ons are represented using composite\n   * symbols of type ::ScannerQRCode_COMPOSITE; add-on components use ::ScannerQRCode_EAN2\n   * or ::ScannerQRCode_EAN5\n   */\n  ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_ADDON\"] = 1792] = \"ScannerQRCode_ADDON\";\n})(ScannerQRCodeSymbolType || (ScannerQRCodeSymbolType = {}));\nvar ScannerQRCodeConfigType;\n(function (ScannerQRCodeConfigType) {\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_ENABLE\"] = 0] = \"ScannerQRCode_CFG_ENABLE\";\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_ADD_CHECK\"] = 1] = \"ScannerQRCode_CFG_ADD_CHECK\";\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_EMIT_CHECK\"] = 2] = \"ScannerQRCode_CFG_EMIT_CHECK\";\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_ASCII\"] = 3] = \"ScannerQRCode_CFG_ASCII\";\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_BINARY\"] = 4] = \"ScannerQRCode_CFG_BINARY\";\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_NUM\"] = 5] = \"ScannerQRCode_CFG_NUM\";\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_MIN_LEN\"] = 32] = \"ScannerQRCode_CFG_MIN_LEN\";\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_MAX_LEN\"] = 33] = \"ScannerQRCode_CFG_MAX_LEN\";\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_UNCERTAINTY\"] = 64] = \"ScannerQRCode_CFG_UNCERTAINTY\";\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_POSITION\"] = 128] = \"ScannerQRCode_CFG_POSITION\";\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_TEST_INVERTED\"] = 129] = \"ScannerQRCode_CFG_TEST_INVERTED\";\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_X_DENSITY\"] = 256] = \"ScannerQRCode_CFG_X_DENSITY\";\n  ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_Y_DENSITY\"] = 257] = \"ScannerQRCode_CFG_Y_DENSITY\";\n})(ScannerQRCodeConfigType || (ScannerQRCodeConfigType = {}));\nvar ScannerQRCodeOrientation;\n(function (ScannerQRCodeOrientation) {\n  ScannerQRCodeOrientation[ScannerQRCodeOrientation[\"ScannerQRCode_ORIENT_UNKNOWN\"] = -1] = \"ScannerQRCode_ORIENT_UNKNOWN\";\n  ScannerQRCodeOrientation[ScannerQRCodeOrientation[\"ScannerQRCode_ORIENT_UP\"] = 0] = \"ScannerQRCode_ORIENT_UP\";\n  ScannerQRCodeOrientation[ScannerQRCodeOrientation[\"ScannerQRCode_ORIENT_RIGHT\"] = 1] = \"ScannerQRCode_ORIENT_RIGHT\";\n  ScannerQRCodeOrientation[ScannerQRCodeOrientation[\"ScannerQRCode_ORIENT_DOWN\"] = 2] = \"ScannerQRCode_ORIENT_DOWN\";\n  ScannerQRCodeOrientation[ScannerQRCodeOrientation[\"ScannerQRCode_ORIENT_LEFT\"] = 3] = \"ScannerQRCode_ORIENT_LEFT\";\n})(ScannerQRCodeOrientation || (ScannerQRCodeOrientation = {}));\nclass ScannerQRCodeTypePointer {\n  constructor(ptr, buf) {\n    this.ptr = ptr;\n    this.ptr32 = ptr >> 2;\n    this.buf = buf;\n    this.HEAP8 = new Int8Array(buf);\n    this.HEAPU32 = new Uint32Array(buf);\n    this.HEAP32 = new Int32Array(buf);\n  }\n}\nclass ScannerQRCodeSymbolPtr extends ScannerQRCodeTypePointer {\n  get type() {\n    return this.HEAPU32[this.ptr32];\n  }\n  get data() {\n    const len = this.HEAPU32[this.ptr32 + 4];\n    const ptr = this.HEAPU32[this.ptr32 + 5];\n    return Int8Array.from(this.HEAP8.subarray(ptr, ptr + len));\n  }\n  get points() {\n    const len = this.HEAPU32[this.ptr32 + 7];\n    const ptr = this.HEAPU32[this.ptr32 + 8];\n    const ptr32 = ptr >> 2;\n    const res = [];\n    for (let i = 0; i < len; ++i) {\n      const x = this.HEAP32[ptr32 + i * 2];\n      const y = this.HEAP32[ptr32 + i * 2 + 1];\n      res.push({\n        x,\n        y\n      });\n    }\n    return res;\n  }\n  get orientation() {\n    return this.HEAP32[this.ptr32 + 9];\n  }\n  get next() {\n    const ptr = this.HEAPU32[this.ptr32 + 11];\n    if (!ptr) return null;\n    return new ScannerQRCodeSymbolPtr(ptr, this.buf);\n  }\n  get time() {\n    return this.HEAPU32[this.ptr32 + 13];\n  }\n  get cacheCount() {\n    return this.HEAP32[this.ptr32 + 14];\n  }\n  get quality() {\n    return this.HEAP32[this.ptr32 + 15];\n  }\n}\nclass SymbolSetPtr extends ScannerQRCodeTypePointer {\n  get head() {\n    const ptr = this.HEAPU32[this.ptr32 + 2];\n    if (!ptr) return null;\n    return new ScannerQRCodeSymbolPtr(ptr, this.buf);\n  }\n}\nclass ScannerQRCodeResult {\n  constructor(ptr) {\n    this.value = '';\n    this.type = ptr.type;\n    this.typeName = ScannerQRCodeSymbolType[this.type];\n    this.data = ptr.data;\n    this.points = ptr.points;\n    this.orientation = ptr.orientation;\n    this.time = ptr.time;\n    this.cacheCount = ptr.cacheCount;\n    this.quality = ptr.quality;\n  }\n  static createSymbolsFromPtr(ptr, buf) {\n    if (ptr == 0) return [];\n    const set = new SymbolSetPtr(ptr, buf);\n    let symbol = set.head;\n    const res = [];\n    while (symbol !== null) {\n      res.push(new ScannerQRCodeResult(symbol));\n      symbol = symbol.next;\n    }\n    return res;\n  }\n  decode(encoding) {\n    const decoder = new TextDecoder(encoding);\n    return decoder.decode(this.data);\n  }\n}\nclass NgxScannerQrcodeModule {}\nNgxScannerQrcodeModule.ɵfac = function NgxScannerQrcodeModule_Factory(t) {\n  return new (t || NgxScannerQrcodeModule)();\n};\nNgxScannerQrcodeModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: NgxScannerQrcodeModule\n});\nNgxScannerQrcodeModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [NgxScannerQrcodeService]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxScannerQrcodeModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [NgxScannerQrcodeComponent],\n      exports: [NgxScannerQrcodeComponent],\n      providers: [NgxScannerQrcodeService]\n    }]\n  }], null, null);\n})();\n\n/*\n * Public API Surface of ngx-scanner-qrcode\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { LOAD_WASM, NgxScannerQrcodeComponent, NgxScannerQrcodeModule, NgxScannerQrcodeService, ScannerQRCodeConfigType, ScannerQRCodeOrientation, ScannerQRCodeResult, ScannerQRCodeSymbolType };","map":{"version":3,"names":["i0","Injectable","EventEmitter","Component","ViewChild","ViewEncapsulation","NgModule","AsyncSubject","BehaviorSubject","_c0","_c1","_c2","WASMPROJECT","WASMREMOTE","WASMREMOTELATEST","BEEP","MEDIA_STREAM_DEFAULT","audio","video","CANVAS_STYLES_LAYER","lineWidth","strokeStyle","fillStyle","CANVAS_STYLES_TEXT","font","CONFIG_DEFAULT","src","fps","vibrate","decode","isBeep","constraints","canvasStyles","WASM_READY","window","OVERRIDES","variableKey","config","defaultConfig","Object","keys","length","key","cloneDeep","JSON","parse","stringify","hasOwnProperty","AS_COMPLETE","as","data","error","next","complete","PLAY_AUDIO","isPlay","Audio","oncanplaythrough","promise","play","catch","e","name","DRAW_RESULT_APPEND_CHILD","code","oriCanvas","elTarget","widthZoom","heightZoom","oriWidth","width","oriHeight","height","oriWHRatio","imgWidth","parseInt","getComputedStyle","imgHeight","imgWHRatio","innerHTML","i","_code","cvs","document","createElement","ctx","getContext","willReadFrequently","loc","X","Y","fontSize","svgSize","num","replace","test","parseFloat","Number","isNaN","points","j","xj","x","yj","y","push","maxX","Math","max","minX","min","maxY","minY","setAttribute","style","top","left","polygon","k","shape","slice","beginPath","moveTo","shift","lineTo","closePath","fill","stroke","qrcodeTooltipTemp","innerText","value","maxWidth","innerWidth","borderRadius","paddingBlock","paddingInline","xmlString","xmlDom","DOMParser","parseFromString","svgDom","ownerDocument","importNode","documentElement","marginLeft","appendChild","addEventListener","navigator","writeText","qrcodeTooltip","resultText","ff","split","fontFamily","color","DRAW_RESULT_ON_CANVAS","fs","styleLayer","cvs2","styleText","ctx2","FILL_TEXT_MULTI_LINE","drawImage","READ_AS_DATA_URL","file","configs","Promise","resolve","reject","fileReader","FileReader","onload","objectFile","url","URL","createObjectURL","image","Image","_asyncToGenerator","canvas","naturalWidth","naturalHeight","imageData","getImageData","zbarWasm","scanImageData","forEach","s","toLocaleLowerCase","blob","CANVAS_TO_BLOB","blobToFile","theBlob","fileName","File","lastModified","Date","getTime","type","assign","onerror","readAsDataURL","toBlob","BLOB_TO_FILE","FILES_TO_SCAN","files","quality","COMPRESS_IMAGE_FILE","then","_files","all","map","m","img","text","lineHeight","measureText","lines","fillText","strokeText","_ref2","compressImage","_ref3","imageBitmap","createImageBitmap","_x","apply","arguments","dataTransfer","DataTransfer","startsWith","items","add","compressedFile","REMOVE_RESULT_PANEL","element","childNodes","el","removeChild","RESET_CANVAS","context","clearRect","UPDATE_WIDTH_HEIGHT_VIDEO","offsetWidth","offsetHeight","VIBRATE","time","IS_MOBILE","vendor","userAgent","phone","version","isSafari","substr","NgxScannerQrcodeService","loadFiles","loadFilesToScan","ɵfac","NgxScannerQrcodeService_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","providedIn","ngDevMode","ɵsetClassMetadata","args","LOAD_WASM","renderer","retry","LOAD_WASM_RETRY","isLoadWasmRemote","DONE","timeoutId","L","clearTimeout","setTimeout","scriptRemote","querySelectorAll","scriptRemoteLatest","scriptProject","f","remove","script","head","mod","NgxScannerQrcodeComponent","constructor","elementRef","event","isStart","isPause","isLoading","isTorch","devices","deviceIndexActive","dataForResize","ready","STATUS","startON","pauseON","loadingON","startOFF","pauseOFF","loadingOFF","torchOFF","ngOnInit","overrideConfig","subscribe","loadImage","resize","start","playDeviceCustom","safariWebRTC","stop","rAF_ID","nativeElement","srcObject","getTracks","track","resultsPanel","requestAnimationFrame","pause","playDevice","deviceId","getConstraints","existDeviceId","findIndex","mediaDevices","getUserMedia","stream","onloadedmetadata","eventEmit","flag","torcher","applyConstraints","advanced","torch","deviceIndex","_this","undefined","videoTrack","getVideoTracks","imageCapture","ImageCapture","getPhotoCapabilities","download","now","_this2","res","item","link","href","click","loadAllDevices","enumerateDevices","cameraDevices","filter","kind","callback","_this3","HTMLImageElement","visibility","setStyle","HTMLVideoElement","videoWidth","videoHeight","freeze","EMIT_DATA","response","emit","delay","readyState","HAVE_ENOUGH_DATA","isReady","ngOnDestroy","NgxScannerQrcodeComponent_Factory","ɵɵdirectiveInject","Renderer2","ElementRef","ɵcmp","ɵɵdefineComponent","selectors","viewQuery","NgxScannerQrcodeComponent_Query","rf","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","hostAttrs","inputs","outputs","exportAs","decls","vars","consts","template","NgxScannerQrcodeComponent_Template","ɵɵelement","styles","encapsulation","selector","host","queries","None","ScannerQRCodeSymbolType","ScannerQRCodeConfigType","ScannerQRCodeOrientation","ScannerQRCodeTypePointer","ptr","buf","ptr32","HEAP8","Int8Array","HEAPU32","Uint32Array","HEAP32","Int32Array","ScannerQRCodeSymbolPtr","len","from","subarray","orientation","cacheCount","SymbolSetPtr","ScannerQRCodeResult","typeName","createSymbolsFromPtr","set","symbol","encoding","decoder","TextDecoder","NgxScannerQrcodeModule","NgxScannerQrcodeModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","providers","declarations","exports"],"sources":["C:/Users/lsesp/Desktop/qr-project/front-end/node_modules/ngx-scanner-qrcode/fesm2022/ngx-scanner-qrcode.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, EventEmitter, Component, ViewChild, ViewEncapsulation, NgModule } from '@angular/core';\nimport { AsyncSubject, BehaviorSubject } from 'rxjs';\n\nconst WASMPROJECT = \"assets/wasm/index.js\";\nconst WASMREMOTE = \"https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@1.6.4/wasm/index.js\";\nconst WASMREMOTELATEST = \"https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@latest/wasm/index.js\";\nconst BEEP = `data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV`;\nconst MEDIA_STREAM_DEFAULT = {\n    audio: false,\n    video: true\n};\nconst CANVAS_STYLES_LAYER = {\n    lineWidth: 1,\n    strokeStyle: 'green',\n    fillStyle: '#55f02880'\n};\nconst CANVAS_STYLES_TEXT = {\n    font: '15px serif',\n    strokeStyle: '#fff0',\n    fillStyle: '#ff0000'\n};\nconst CONFIG_DEFAULT = {\n    src: '',\n    fps: 30,\n    vibrate: 300,\n    decode: 'utf-8',\n    isBeep: true,\n    constraints: MEDIA_STREAM_DEFAULT,\n    canvasStyles: [CANVAS_STYLES_LAYER, CANVAS_STYLES_TEXT]\n};\n\n/**\n * WASM_READY\n * @returns\n */\nvar WASM_READY = () => ('zbarWasm' in window);\n/**\n * OVERRIDES\n * @param variableKey\n * @param config\n * @param defaultConfig\n * @returns\n */\nconst OVERRIDES = (variableKey, config, defaultConfig) => {\n    if (config && Object.keys(config[variableKey]).length) {\n        for (const key in defaultConfig) {\n            const cloneDeep = JSON.parse(JSON.stringify({ ...config[variableKey], ...{ [key]: defaultConfig[key] } }));\n            config[variableKey] = config[variableKey].hasOwnProperty(key) ? config[variableKey] : cloneDeep;\n        }\n        return config[variableKey];\n    }\n    else {\n        return defaultConfig;\n    }\n};\n/**\n * AS_COMPLETE\n * @param as\n * @param data\n * @param error\n */\nconst AS_COMPLETE = (as, data, error) => {\n    error ? as.error(error) : as.next(data);\n    as.complete();\n};\n/**\n * PLAY_AUDIO\n * @param isPlay\n * @returns\n */\nconst PLAY_AUDIO = (isPlay = false) => {\n    if (isPlay === false)\n        return;\n    const audio = new Audio(BEEP);\n    // when the sound has been loaded, execute your code\n    audio.oncanplaythrough = () => {\n        const promise = audio.play();\n        if (promise) {\n            promise.catch((e) => {\n                if (e.name === \"NotAllowedError\" || e.name === \"NotSupportedError\") {\n                    // console.log(e.name);\n                }\n            });\n        }\n    };\n};\n/**\n * DRAW_RESULT_APPEND_CHILD\n * @param code\n * @param oriCanvas\n * @param elTarget\n * @param canvasStyles\n */\nconst DRAW_RESULT_APPEND_CHILD = (code, oriCanvas, elTarget, canvasStyles) => {\n    let widthZoom;\n    let heightZoom;\n    let oriWidth = oriCanvas.width;\n    let oriHeight = oriCanvas.height;\n    let oriWHRatio = oriWidth / oriHeight;\n    let imgWidth = parseInt(getComputedStyle(oriCanvas).width);\n    let imgHeight = parseInt(getComputedStyle(oriCanvas).height);\n    let imgWHRatio = imgWidth / imgHeight;\n    elTarget.innerHTML = '';\n    if (oriWHRatio > imgWHRatio) {\n        widthZoom = imgWidth / oriWidth;\n        heightZoom = imgWidth / oriWHRatio / oriHeight;\n    }\n    else {\n        heightZoom = imgHeight / oriHeight;\n        widthZoom = (imgHeight * oriWHRatio) / oriWidth;\n    }\n    for (let i = 0; i < code.length; i++) {\n        const _code = code[i];\n        // New canvas\n        let cvs = document.createElement(\"canvas\");\n        let ctx = cvs.getContext('2d', { willReadFrequently: true });\n        let loc = {};\n        let X = [];\n        let Y = [];\n        let fontSize = 0;\n        let svgSize = 0;\n        let num = canvasStyles.length === 2 && canvasStyles[1]?.font?.replace(/[^0-9]/g, '');\n        if (num && /[0-9]/g.test(num)) {\n            fontSize = parseFloat(num);\n            svgSize = (widthZoom || 1) * fontSize;\n            if (Number.isNaN(svgSize)) {\n                svgSize = fontSize;\n            }\n        }\n        // Point x,y\n        const points = _code.points;\n        for (let j = 0; j < points.length; j++) {\n            const xj = points?.[j]?.x ?? 0;\n            const yj = points?.[j]?.y ?? 0;\n            loc[`x${j + 1}`] = xj;\n            loc[`y${j + 1}`] = yj;\n            X.push(xj);\n            Y.push(yj);\n        }\n        // Min max\n        let maxX = Math.max(...X);\n        let minX = Math.min(...X);\n        let maxY = Math.max(...Y);\n        let minY = Math.min(...Y);\n        // Add class\n        cvs.setAttribute('class', 'qrcode-polygon');\n        // Size with screen zoom\n        if (oriWHRatio > imgWHRatio) {\n            cvs.style.top = minY * heightZoom + (imgHeight - imgWidth / oriWHRatio) * 0.5 + \"px\";\n            cvs.style.left = minX * widthZoom + \"px\";\n            cvs.width = (maxX - minX) * widthZoom;\n            cvs.height = (maxY - minY) * widthZoom;\n        }\n        else {\n            cvs.style.top = minY * heightZoom + \"px\";\n            cvs.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + \"px\";\n            cvs.width = (maxX - minX) * heightZoom;\n            cvs.height = (maxY - minY) * heightZoom;\n        }\n        // Style for canvas\n        for (const key in canvasStyles[0]) {\n            ctx[key] = canvasStyles[0][key];\n        }\n        // polygon [x,y, x,y, x,y.....];\n        const polygon = [];\n        for (let k = 0; k < X.length; k++) {\n            polygon.push((loc[`x${k + 1}`] - minX) * heightZoom);\n            polygon.push((loc[`y${k + 1}`] - minY) * widthZoom);\n        }\n        // Copy array\n        const shape = polygon.slice(0);\n        // Draw polygon\n        ctx.beginPath();\n        ctx.moveTo(shape.shift(), shape.shift());\n        while (shape.length) {\n            ctx.lineTo(shape.shift(), shape.shift()); //x,y\n        }\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n        if (fontSize) {\n            // Tooltip result\n            const qrcodeTooltipTemp = document.createElement('div');\n            qrcodeTooltipTemp.setAttribute('class', 'qrcode-tooltip-temp');\n            qrcodeTooltipTemp.innerText = _code.value;\n            qrcodeTooltipTemp.style.maxWidth = ((oriWidth > window.innerWidth) ? window.innerWidth * 0.9 : oriWidth) + \"px\";\n            qrcodeTooltipTemp.style.borderRadius = `clamp(1px, ${(widthZoom * fontSize) - 10}px, 3px)`;\n            qrcodeTooltipTemp.style.paddingBlock = `clamp(1px, ${(widthZoom * fontSize) - 10}px, 3px)`; // top - bottom\n            qrcodeTooltipTemp.style.paddingInline = `clamp(2.5px, ${(widthZoom * fontSize) - 6}px, 10px)`; // left - right\n            const xmlString = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${svgSize}\" height=\"${svgSize}\" viewBox=\"0 0 512 512\"><rect x=\"128\" y=\"128\" width=\"336\" height=\"336\" rx=\"57\" ry=\"57\"></rect><path d=\"M383.5,128l.5-24a56.16,56.16,0,0,0-56-56H112a64.19,64.19,0,0,0-64,64V328a56.16,56.16,0,0,0,56,56h24\"></path></svg>`;\n            const xmlDom = new DOMParser().parseFromString(xmlString, 'application/xml');\n            const svgDom = qrcodeTooltipTemp.ownerDocument.importNode(xmlDom.documentElement, true);\n            svgDom.style.marginLeft = `clamp(1px, ${(widthZoom * fontSize) - 10}px, 3px)`; // left - right\n            qrcodeTooltipTemp.appendChild(svgDom);\n            svgDom.addEventListener(\"click\", () => window.navigator['clipboard'].writeText(_code.value));\n            qrcodeTooltipTemp.addEventListener(\"click\", () => window.navigator['clipboard'].writeText(_code.value));\n            // Tooltip box\n            const qrcodeTooltip = document.createElement('div');\n            qrcodeTooltip.setAttribute('class', 'qrcode-tooltip');\n            qrcodeTooltip.appendChild(qrcodeTooltipTemp);\n            heightZoom = imgHeight / oriHeight;\n            widthZoom = (imgHeight * oriWHRatio) / oriWidth;\n            qrcodeTooltip.style.fontSize = widthZoom * fontSize + 'px';\n            qrcodeTooltip.style.top = minY * heightZoom + \"px\";\n            qrcodeTooltip.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + \"px\";\n            qrcodeTooltip.style.width = (maxX - minX) * heightZoom + \"px\";\n            qrcodeTooltip.style.height = (maxY - minY) * heightZoom + \"px\";\n            // Result text\n            const resultText = document.createElement('span');\n            resultText.innerText = _code.value;\n            // Set position result text\n            resultText.style.top = minY * heightZoom + (-20 * heightZoom) + \"px\";\n            resultText.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + \"px\";\n            // Style text\n            const ff = canvasStyles[1]?.font?.split(' ')?.[1];\n            resultText.style.fontFamily = ff;\n            resultText.style.fontSize = widthZoom * fontSize + 'px';\n            resultText.style.color = canvasStyles?.[1]?.fillStyle;\n            elTarget?.appendChild(qrcodeTooltip);\n            elTarget?.appendChild(resultText);\n        }\n        elTarget?.appendChild(cvs);\n    }\n    ;\n};\n/**\n * DRAW_RESULT_ON_CANVAS\n * @param code\n * @param cvs\n * @param canvasStyles\n */\nconst DRAW_RESULT_ON_CANVAS = (code, cvs, canvasStyles) => {\n    let ctx = cvs.getContext('2d', { willReadFrequently: true });\n    for (let i = 0; i < code.length; i++) {\n        const _code = code[i];\n        let loc = {};\n        let X = [];\n        let Y = [];\n        let fontSize = 0;\n        const fs = canvasStyles[1]?.font?.split(' ')?.[0];\n        let num = fs?.replace(/[^0-9]/g, '');\n        if (num && /[0-9]/g.test(num)) {\n            fontSize = parseFloat(num);\n        }\n        // Point x,y\n        const points = _code.points;\n        for (let j = 0; j < points.length; j++) {\n            const xj = points?.[j]?.x ?? 0;\n            const yj = points?.[j]?.y ?? 0;\n            loc[`x${j + 1}`] = xj;\n            loc[`y${j + 1}`] = yj;\n            X.push(xj);\n            Y.push(yj);\n        }\n        // Min max\n        let minX = Math.min(...X);\n        let minY = Math.min(...Y);\n        const styleLayer = () => {\n            for (const key in canvasStyles[0]) {\n                ctx[key] = canvasStyles[0][key];\n            }\n            // polygon [x,y, x,y, x,y.....];\n            const polygon = [];\n            for (let k = 0; k < X.length; k++) {\n                polygon.push(loc[`x${k + 1}`]);\n                polygon.push(loc[`y${k + 1}`]);\n            }\n            // Copy array\n            const shape = polygon.slice(0);\n            // Draw polygon\n            ctx.beginPath();\n            ctx.moveTo(shape.shift(), shape.shift());\n            while (shape.length) {\n                ctx.lineTo(shape.shift(), shape.shift()); //x,y\n            }\n            ctx.closePath();\n            ctx.fill();\n            ctx.stroke();\n        };\n        let cvs2 = document.createElement('canvas');\n        const styleText = () => {\n            const ff = canvasStyles[1]?.font?.split(' ')?.[1];\n            cvs2.height = cvs.height;\n            cvs2.width = cvs.width;\n            let ctx2 = cvs2.getContext('2d', { willReadFrequently: true });\n            ctx2.font = fontSize + `px ` + ff;\n            for (const key in canvasStyles[1]) {\n                ctx2[key] = canvasStyles[1][key];\n            }\n            FILL_TEXT_MULTI_LINE(ctx2, _code.value, minX, minY - 5);\n        };\n        styleLayer();\n        styleText();\n        // Merge cvs2 into cvs\n        ctx.drawImage(cvs2, 0, 0);\n    }\n    ;\n};\n/**\n * READ_AS_DATA_URL\n * @param file\n * @param configs\n * @returns\n */\nconst READ_AS_DATA_URL = (file, configs) => {\n    /** overrides **/\n    let decode = configs?.decode ?? CONFIG_DEFAULT.decode;\n    let canvasStyles = configs?.canvasStyles?.length === 2 ? configs?.canvasStyles : [CANVAS_STYLES_LAYER, CANVAS_STYLES_TEXT];\n    let isBeep = configs?.isBeep ?? CONFIG_DEFAULT.isBeep;\n    /** drawImage **/\n    return new Promise((resolve, reject) => {\n        const fileReader = new FileReader();\n        fileReader.onload = () => {\n            const objectFile = {\n                name: file.name,\n                file: file,\n                url: URL.createObjectURL(file)\n            };\n            // Set the src of this Image object.\n            const image = new Image();\n            // Setting cross origin value to anonymous\n            image.setAttribute('crossOrigin', 'anonymous');\n            // When our image has loaded.\n            image.onload = async () => {\n                // Get the canvas element by using the getElementById method.\n                const canvas = document.createElement('canvas');\n                // HTMLImageElement size\n                canvas.width = image.naturalWidth || image.width;\n                canvas.height = image.naturalHeight || image.height;\n                // Get a 2D drawing context for the canvas.\n                const ctx = canvas.getContext('2d');\n                // Draw image\n                ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n                // Data image\n                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n                // Scanner\n                if (WASM_READY()) {\n                    const code = await zbarWasm.scanImageData(imageData);\n                    if (code?.length) {\n                        // Decode\n                        code.forEach((s) => s.value = s.decode(decode?.toLocaleLowerCase()));\n                        // Overlay\n                        DRAW_RESULT_ON_CANVAS(code, canvas, canvasStyles);\n                        // Emit object\n                        const blob = await CANVAS_TO_BLOB(canvas);\n                        const url = URL.createObjectURL(blob);\n                        const blobToFile = (theBlob, fileName) => new File([theBlob], fileName, { lastModified: new Date().getTime(), type: theBlob.type });\n                        resolve(Object.assign({}, objectFile, { data: code, url: url, canvas: canvas, file: blobToFile(blob, objectFile.name) }));\n                        PLAY_AUDIO(isBeep);\n                    }\n                    else {\n                        resolve(Object.assign({}, objectFile, { data: code, canvas: canvas }));\n                    }\n                }\n            };\n            // Set src\n            image.src = objectFile.url;\n        };\n        fileReader.onerror = (error) => reject(error);\n        fileReader.readAsDataURL(file);\n    });\n};\n/**\n * Convert canvas to blob\n * canvas.toBlob((blob) => { .. }, 'image/jpeg', 0.95); // JPEG at 95% quality\n * @param canvas\n * @param type\n * @returns\n */\nconst CANVAS_TO_BLOB = (canvas, type) => {\n    return new Promise((resolve, reject) => canvas.toBlob(blob => resolve(blob), type));\n};\n/**\n * Convert blob to file\n * @param theBlob\n * @param fileName\n * @returns\n */\nconst BLOB_TO_FILE = (theBlob, fileName) => {\n    return new File([theBlob], fileName, { lastModified: new Date().getTime(), type: theBlob.type });\n};\n/**\n * FILES_TO_SCAN\n * @param files\n * @param configs\n * @param quality\n * @param type\n * @param as\n * @returns\n */\nconst FILES_TO_SCAN = (files = [], configs, quality, type, as = new AsyncSubject()) => {\n    COMPRESS_IMAGE_FILE(files, quality, type).then((_files) => {\n        Promise.all(Object.assign([], files).map(m => READ_AS_DATA_URL(m, configs))).then((img) => {\n            AS_COMPLETE(as, img);\n        }).catch((error) => AS_COMPLETE(as, null, error));\n    });\n    return as;\n};\n/**\n * FILL_TEXT_MULTI_LINE\n * @param ctx\n * @param text\n * @param x\n * @param y\n */\nconst FILL_TEXT_MULTI_LINE = (ctx, text, x, y) => {\n    let lineHeight = ctx.measureText(\"M\").width * 1.2;\n    let lines = text.split(\"\\n\");\n    for (var i = 0; i < lines.length; ++i) {\n        ctx.fillText(lines[i], x, y);\n        ctx.strokeText(lines[i], x, y);\n        y += lineHeight;\n    }\n};\n/**\n * COMPRESS_IMAGE_FILE\n * @param files\n * @param quality\n * @param type\n * @returns\n */\nconst COMPRESS_IMAGE_FILE = async (files = [], quality = 0.5, type = \"image/jpeg\") => {\n    // No files selected\n    if (!files.length || quality === 1)\n        return files;\n    const compressImage = async (file) => {\n        // Get as image data\n        const imageBitmap = await createImageBitmap(file);\n        // Draw to canvas\n        const canvas = document.createElement('canvas');\n        canvas.width = imageBitmap.width;\n        canvas.height = imageBitmap.height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(imageBitmap, 0, 0);\n        // Turn into Blob\n        const blob = await new Promise((resolve) => canvas.toBlob(resolve, type, quality));\n        // Turn Blob into File\n        return new File([blob], file.name, {\n            type: blob.type,\n        });\n    };\n    // We'll store the files in this data transfer object\n    const dataTransfer = new DataTransfer();\n    // For every file in the files list\n    await (async () => {\n        for (const file of files) {\n            // We don't have to compress files that aren't images\n            if (!file.type.startsWith('image')) {\n                // Ignore this file, but do add it to our result\n                dataTransfer.items.add(file);\n                continue;\n            }\n            // We compress the file by 50%\n            const compressedFile = await compressImage(file);\n            // Save back the compressed file instead of the original file\n            dataTransfer.items.add(compressedFile);\n        }\n    })();\n    // return value new files list\n    return dataTransfer.files;\n};\n/**\n * REMOVE_RESULT_PANEL\n * @param element\n */\nconst REMOVE_RESULT_PANEL = (element) => {\n    // clear text result and tooltip\n    Object.assign([], element.childNodes).forEach(el => element.removeChild(el));\n};\n/**\n * RESET_CANVAS\n * @param canvas\n */\nconst RESET_CANVAS = (canvas) => {\n    // reset canvas\n    const context = canvas.getContext('2d', { willReadFrequently: true });\n    // clear frame when reloop\n    context.clearRect(0, 0, canvas.width, canvas.height);\n};\n/**\n * UPDATE_WIDTH_HEIGHT_VIDEO\n * @param video\n * @param canvas\n */\nconst UPDATE_WIDTH_HEIGHT_VIDEO = (video, canvas) => {\n    video.style.width = canvas.offsetWidth + 'px';\n    video.style.height = canvas.offsetHeight + 'px';\n};\n/**\n * VIBRATE\n * @param time\n */\nconst VIBRATE = (time = 300) => {\n    time && IS_MOBILE() && window?.navigator?.vibrate(time);\n};\n/**\n * IS_MOBILE\n * @returns\n */\nconst IS_MOBILE = () => {\n    const vendor = navigator.userAgent || navigator['vendor'] || window['opera'];\n    const phone = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\n    const version = /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;\n    const isSafari = /^((?!chrome|android).)*safari/i;\n    return !!(phone.test(vendor) || version.test(vendor.substr(0, 4))) && !isSafari.test(vendor);\n};\n\nclass NgxScannerQrcodeService {\n    /**\n     * loadFiles\n     * @param files\n     * @param quality\n     * @param type\n     * @returns\n     */\n    loadFiles(files = [], quality, type) {\n        const as = new AsyncSubject();\n        COMPRESS_IMAGE_FILE(files, quality, type).then((_files) => {\n            Promise.all(Object.assign([], files).map(m => this.readAsDataURL(m))).then((img) => AS_COMPLETE(as, img)).catch((error) => AS_COMPLETE(as, null, error));\n        });\n        return as;\n    }\n    /**\n     * loadFilesToScan\n     * @param files\n     * @param config\n     * @param quality\n     * @param type\n     * @returns\n     */\n    loadFilesToScan(files = [], config, quality, type) {\n        return FILES_TO_SCAN(files, config, quality, type);\n    }\n    /**\n     * readAsDataURL\n     * @param file\n     * @returns\n     */\n    readAsDataURL(file) {\n        /** drawImage **/\n        return new Promise((resolve, reject) => {\n            const fileReader = new FileReader();\n            fileReader.onload = () => {\n                const objectFile = {\n                    name: file.name,\n                    file: file,\n                    url: URL.createObjectURL(file)\n                };\n                resolve(objectFile);\n            };\n            fileReader.onerror = (error) => reject(error);\n            fileReader.readAsDataURL(file);\n        });\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.0.3\", ngImport: i0, type: NgxScannerQrcodeService, deps: [], target: i0.ɵɵFactoryTarget.Injectable }); }\n    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"16.0.3\", ngImport: i0, type: NgxScannerQrcodeService, providedIn: 'root' }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.0.3\", ngImport: i0, type: NgxScannerQrcodeService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root'\n                }]\n        }] });\n\n/**\n * LOAD_WASM\n * @param as\n * @param renderer\n * @returns\n */\nconst LOAD_WASM = (as = new AsyncSubject(), renderer) => {\n    let retry = 0;\n    const LOAD_WASM_RETRY = (isLoadWasmRemote = false) => {\n        const DONE = () => {\n            let timeoutId;\n            try {\n                const L = () => {\n                    clearTimeout(timeoutId);\n                    WASM_READY() ? setTimeout(() => AS_COMPLETE(as, true)) : timeoutId = setTimeout(() => L());\n                };\n                setTimeout(() => L());\n                setTimeout(() => clearTimeout(timeoutId), 3000);\n            }\n            catch (error) {\n                clearTimeout(timeoutId);\n            }\n        };\n        const scriptRemote = document.querySelectorAll(`script[src=\"${WASMREMOTE}\"]`);\n        const scriptRemoteLatest = document.querySelectorAll(`script[src=\"${WASMREMOTELATEST}\"]`);\n        if (scriptRemote.length || scriptRemoteLatest.length) {\n            DONE();\n        }\n        else {\n            const scriptProject = document.querySelectorAll(`script[src=\"${WASMPROJECT}\"]`);\n            if (scriptProject.length === 1) {\n                DONE();\n            }\n            else {\n                scriptProject.forEach(f => f.remove());\n                if (renderer) {\n                    const script = renderer.createElement(\"script\");\n                    renderer.setAttribute(script, \"src\", isLoadWasmRemote ? WASMREMOTE : WASMPROJECT);\n                    renderer.setAttribute(script, \"type\", \"text/javascript\");\n                    renderer.setAttribute(script, \"async\", \"\");\n                    renderer.appendChild(document.head, script);\n                    script.onload = () => DONE();\n                    script.onerror = () => {\n                        if (retry < 2) {\n                            document.head.removeChild(script);\n                            LOAD_WASM_RETRY(true);\n                        }\n                        else {\n                            AS_COMPLETE(as, false, 'Could not load script ' + isLoadWasmRemote ? WASMREMOTE : WASMPROJECT);\n                        }\n                    };\n                    retry += 1;\n                }\n                else {\n                    const mod = document.createElement('script');\n                    mod.setAttribute(\"src\", isLoadWasmRemote ? WASMREMOTE : WASMPROJECT);\n                    mod.setAttribute(\"type\", \"text/javascript\");\n                    mod.setAttribute(\"async\", \"\");\n                    document.head.appendChild(mod);\n                    mod.onload = () => DONE();\n                    mod.onerror = () => {\n                        if (retry < 2) {\n                            document.head.removeChild(mod);\n                            LOAD_WASM_RETRY(true);\n                        }\n                        else {\n                            AS_COMPLETE(as, false, 'Could not load script ' + isLoadWasmRemote ? WASMREMOTE : WASMPROJECT);\n                        }\n                    };\n                    retry += 1;\n                }\n            }\n        }\n    };\n    LOAD_WASM_RETRY();\n    return as;\n};\n\nclass NgxScannerQrcodeComponent {\n    constructor(renderer, elementRef) {\n        this.renderer = renderer;\n        this.elementRef = elementRef;\n        /**\n         * EventEmitter\n         */\n        this.event = new EventEmitter();\n        /**\n         * Input\n         */\n        this.src = CONFIG_DEFAULT.src;\n        this.fps = CONFIG_DEFAULT.fps;\n        this.vibrate = CONFIG_DEFAULT.vibrate;\n        this.decode = CONFIG_DEFAULT.decode;\n        this.isBeep = CONFIG_DEFAULT.isBeep;\n        this.config = CONFIG_DEFAULT;\n        this.constraints = CONFIG_DEFAULT.constraints;\n        this.canvasStyles = [CANVAS_STYLES_LAYER, CANVAS_STYLES_TEXT];\n        /**\n         * Export\n        */\n        this.isStart = false;\n        this.isPause = false;\n        this.isLoading = false;\n        this.isTorch = false;\n        this.data = new BehaviorSubject([]);\n        this.devices = new BehaviorSubject([]);\n        this.deviceIndexActive = 0;\n        this.dataForResize = [];\n        this.ready = new AsyncSubject();\n        this.STATUS = {\n            startON: () => this.isStart = true,\n            pauseON: () => this.isPause = true,\n            loadingON: () => this.isLoading = true,\n            startOFF: () => this.isStart = false,\n            pauseOFF: () => this.isPause = false,\n            loadingOFF: () => this.isLoading = false,\n            torchOFF: () => this.isTorch = false,\n        };\n    }\n    ngOnInit() {\n        this.overrideConfig();\n        LOAD_WASM(this.ready, this.renderer).subscribe(() => {\n            if (this.src) {\n                this.loadImage(this.src);\n            }\n            this.resize();\n        });\n    }\n    /**\n     * start\n     * @param playDeviceCustom\n     * @returns\n     */\n    start(playDeviceCustom) {\n        const as = new AsyncSubject();\n        if (this.isStart) {\n            // Reject\n            AS_COMPLETE(as, false);\n        }\n        else {\n            // fix safari\n            this.safariWebRTC(as, playDeviceCustom);\n        }\n        return as;\n    }\n    /**\n     * stop\n     * @returns\n     */\n    stop() {\n        this.STATUS.pauseOFF();\n        this.STATUS.startOFF();\n        this.STATUS.torchOFF();\n        this.STATUS.loadingOFF();\n        const as = new AsyncSubject();\n        try {\n            clearTimeout(this.rAF_ID);\n            this.video.nativeElement.srcObject.getTracks().forEach((track) => {\n                track.stop();\n                AS_COMPLETE(as, true);\n            });\n            this.dataForResize = [];\n            RESET_CANVAS(this.canvas.nativeElement);\n            REMOVE_RESULT_PANEL(this.resultsPanel.nativeElement);\n        }\n        catch (error) {\n            AS_COMPLETE(as, false, error);\n        }\n        return as;\n    }\n    /**\n     * play\n     * @returns\n     */\n    play() {\n        const as = new AsyncSubject();\n        if (this.isPause) {\n            this.video.nativeElement.play();\n            this.STATUS.pauseOFF();\n            this.requestAnimationFrame();\n            AS_COMPLETE(as, true);\n        }\n        else {\n            AS_COMPLETE(as, false);\n        }\n        return as;\n    }\n    /**\n     * pause\n     * @returns\n     */\n    pause() {\n        const as = new AsyncSubject();\n        if (this.isStart) {\n            clearTimeout(this.rAF_ID);\n            this.video.nativeElement.pause();\n            this.STATUS.pauseON();\n            AS_COMPLETE(as, true);\n        }\n        else {\n            AS_COMPLETE(as, false);\n        }\n        return as;\n    }\n    /**\n     * playDevice\n     * @param deviceId\n     * @param as\n     * @returns\n     */\n    playDevice(deviceId, as = new AsyncSubject()) {\n        const constraints = this.getConstraints();\n        const existDeviceId = (this.isStart && constraints) ? constraints.deviceId !== deviceId : true;\n        switch (true) {\n            case deviceId === 'null' || deviceId === 'undefined' || !deviceId:\n                stop();\n                this.stop();\n                AS_COMPLETE(as, false);\n                break;\n            case deviceId && existDeviceId:\n                stop();\n                this.stop();\n                // Loading on\n                this.STATUS.loadingON();\n                this.deviceIndexActive = this.devices.value.findIndex((f) => f.deviceId === deviceId);\n                const constraints = { ...this.constraints, audio: false, video: { deviceId: deviceId, ...this.constraints.video } };\n                // MediaStream\n                navigator.mediaDevices.getUserMedia(constraints).then((stream) => {\n                    this.video.nativeElement.srcObject = stream;\n                    this.video.nativeElement.onloadedmetadata = () => {\n                        this.video.nativeElement.play();\n                        this.requestAnimationFrame();\n                        AS_COMPLETE(as, true);\n                        this.STATUS.startON();\n                        this.STATUS.loadingOFF();\n                    };\n                }).catch((error) => {\n                    this.eventEmit(false);\n                    AS_COMPLETE(as, false, error);\n                    this.STATUS.startOFF();\n                    this.STATUS.loadingOFF();\n                });\n                break;\n            default:\n                AS_COMPLETE(as, false);\n                this.STATUS.loadingOFF();\n                break;\n        }\n        return as;\n    }\n    /**\n     * loadImage\n     * @param src\n     * @returns\n     */\n    loadImage(src) {\n        const as = new AsyncSubject();\n        // Loading on\n        this.STATUS.startOFF();\n        this.STATUS.loadingON();\n        // Set the src of this Image object.\n        const image = new Image();\n        // Setting cross origin value to anonymous\n        image.setAttribute('crossOrigin', 'anonymous');\n        // When our image has loaded.\n        image.onload = () => {\n            WASM_READY() && this.drawImage(image, (flag) => {\n                AS_COMPLETE(as, flag);\n                this.STATUS.startOFF();\n                this.STATUS.loadingOFF();\n            });\n        };\n        // Set src\n        image.src = src;\n        return as;\n    }\n    /**\n     * torcher\n     * @returns\n     */\n    torcher() {\n        const as = this.applyConstraints({ advanced: [{ torch: this.isTorch }] });\n        as.subscribe(() => false, () => this.isTorch = !this.isTorch);\n        return as;\n    }\n    /**\n     * applyConstraints\n     * @param constraints\n     * @param deviceIndex\n     * @returns\n     */\n    applyConstraints(constraints, deviceIndex = 0) {\n        const as = new AsyncSubject();\n        if (this.isStart) {\n            const stream = this.video.nativeElement.srcObject;\n            if (deviceIndex !== null || deviceIndex !== undefined || !Number.isNaN(deviceIndex)) {\n                const videoTrack = stream.getVideoTracks()[deviceIndex];\n                const imageCapture = new window.ImageCapture(videoTrack);\n                imageCapture.getPhotoCapabilities().then(async () => {\n                    await videoTrack.applyConstraints(constraints);\n                    UPDATE_WIDTH_HEIGHT_VIDEO(this.video.nativeElement, this.canvas.nativeElement);\n                    AS_COMPLETE(as, true);\n                }).catch((error) => {\n                    switch (error?.name) {\n                        case 'NotFoundError':\n                        case 'DevicesNotFoundError':\n                            AS_COMPLETE(as, false, 'Required track is missing');\n                            break;\n                        case 'NotReadableError':\n                        case 'TrackStartError':\n                            AS_COMPLETE(as, false, 'Webcam or mic are already in use');\n                            break;\n                        case 'OverconstrainedError':\n                        case 'ConstraintNotSatisfiedError':\n                            AS_COMPLETE(as, false, 'Constraints can not be satisfied by avb. devices');\n                            break;\n                        case 'NotAllowedError':\n                        case 'PermissionDeniedError':\n                            AS_COMPLETE(as, false, 'Permission denied in browser');\n                            break;\n                        case 'TypeError':\n                            AS_COMPLETE(as, false, 'Empty constraints object');\n                            break;\n                        default:\n                            AS_COMPLETE(as, false, error);\n                            break;\n                    }\n                });\n            }\n            else {\n                AS_COMPLETE(as, false, 'Please check again deviceIndex');\n            }\n        }\n        else {\n            AS_COMPLETE(as, false, 'Please start the scanner');\n        }\n        return as;\n    }\n    ;\n    /**\n     * getConstraints\n     * @param deviceIndex\n     * @returns\n     */\n    getConstraints(deviceIndex = 0) {\n        const stream = this.video.nativeElement.srcObject;\n        const videoTrack = stream?.getVideoTracks()[deviceIndex];\n        return videoTrack?.getConstraints();\n    }\n    /**\n     * download\n     * @param fileName\n     * @param quality\n     * @param type\n     * @returns\n     */\n    download(fileName = `ngx_scanner_qrcode_${Date.now()}.png`, quality, type) {\n        const as = new AsyncSubject();\n        (async () => {\n            const blob = await CANVAS_TO_BLOB(this.canvas.nativeElement);\n            const file = BLOB_TO_FILE(blob, fileName);\n            FILES_TO_SCAN([file], this.config, quality, type, as).subscribe((res) => {\n                res.forEach((item) => {\n                    if (item?.data?.length) {\n                        const link = document.createElement('a');\n                        link.href = item.url;\n                        link.download = item.name;\n                        link.click();\n                        link.remove();\n                    }\n                });\n            });\n        })();\n        return as;\n    }\n    /**\n     * resize\n     */\n    resize() {\n        window.addEventListener(\"resize\", () => {\n            DRAW_RESULT_APPEND_CHILD(this.dataForResize, this.canvas.nativeElement, this.resultsPanel.nativeElement, this.canvasStyles);\n            UPDATE_WIDTH_HEIGHT_VIDEO(this.video.nativeElement, this.canvas.nativeElement);\n        });\n    }\n    /**\n     * overrideConfig\n     */\n    overrideConfig() {\n        if ('src' in this.config)\n            this.src = this.config.src;\n        if ('fps' in this.config)\n            this.fps = this.config.fps;\n        if ('vibrate' in this.config)\n            this.vibrate = this.config.vibrate;\n        if ('decode' in this.config)\n            this.decode = this.config.decode;\n        if ('isBeep' in this.config)\n            this.isBeep = this.config.isBeep;\n        if ('constraints' in this.config)\n            this.constraints = OVERRIDES('constraints', this.config, MEDIA_STREAM_DEFAULT);\n        if ('canvasStyles' in this.config && this.config?.canvasStyles?.length === 2)\n            this.canvasStyles = this.config.canvasStyles;\n    }\n    /**\n     * safariWebRTC\n     * Fix issue on safari\n     * https://webrtchacks.com/guide-to-safari-webrtc\n     * @param as\n     * @param playDeviceCustom\n     */\n    safariWebRTC(as, playDeviceCustom) {\n        // Loading on\n        this.STATUS.startOFF();\n        this.STATUS.loadingON();\n        navigator.mediaDevices.getUserMedia(this.constraints).then((stream) => {\n            stream.getTracks().forEach(track => track.stop());\n            this.loadAllDevices(as, playDeviceCustom);\n        }).catch((error) => {\n            AS_COMPLETE(as, false, error);\n            this.STATUS.startOFF();\n            this.STATUS.loadingOFF();\n        });\n    }\n    /**\n     * loadAllDevices\n     * @param as\n     * @param playDeviceCustom\n     */\n    loadAllDevices(as, playDeviceCustom) {\n        navigator.mediaDevices.enumerateDevices().then(devices => {\n            let cameraDevices = devices.filter(f => f.kind == 'videoinput');\n            this.devices.next(cameraDevices);\n            if (cameraDevices?.length > 0) {\n                AS_COMPLETE(as, cameraDevices);\n                playDeviceCustom ? playDeviceCustom(cameraDevices) : this.playDevice(cameraDevices[0].deviceId);\n            }\n            else {\n                AS_COMPLETE(as, false, 'No camera detected.');\n                this.STATUS.startOFF();\n                this.STATUS.loadingOFF();\n            }\n        }).catch((error) => {\n            AS_COMPLETE(as, false, error);\n            this.STATUS.startOFF();\n            this.STATUS.loadingOFF();\n        });\n    }\n    /**\n     * drawImage\n     * @param element\n     * @param callback\n     */\n    async drawImage(element, callback = () => { }) {\n        // Get the canvas element by using the getElementById method.\n        const canvas = this.canvas.nativeElement;\n        // Get a 2D drawing context for the canvas.\n        const ctx = canvas.getContext('2d', { willReadFrequently: true });\n        // HTMLImageElement size\n        if (element instanceof HTMLImageElement) {\n            canvas.width = element.naturalWidth;\n            canvas.height = element.naturalHeight;\n            element.style.visibility = '';\n            this.video.nativeElement.style.visibility = 'hidden';\n            // Image center and auto scale\n            this.renderer.setStyle(this.elementRef.nativeElement, 'width', canvas.width + 'px');\n            this.renderer.setStyle(this.elementRef.nativeElement, 'maxWidth', 100 + '%');\n            this.renderer.setStyle(this.elementRef.nativeElement, 'display', 'inline-block');\n        }\n        // HTMLVideoElement size\n        if (element instanceof HTMLVideoElement) {\n            canvas.width = element.videoWidth;\n            canvas.height = element.videoHeight;\n            element.style.visibility = '';\n            this.canvas.nativeElement.style.visibility = 'hidden';\n        }\n        // Set width, height for video element\n        UPDATE_WIDTH_HEIGHT_VIDEO(this.video.nativeElement, canvas);\n        // clear frame\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        // Draw image\n        ctx.drawImage(element, 0, 0, canvas.width, canvas.height);\n        // Data image\n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        // Draw frame\n        const code = await zbarWasm.scanImageData(imageData);\n        if (code?.length) {\n            // Decode\n            code.forEach((s) => s.value = s.decode(this.decode?.toLocaleLowerCase()));\n            // Overlay\n            DRAW_RESULT_APPEND_CHILD(code, Object.freeze(this.canvas.nativeElement), this.resultsPanel.nativeElement, this.canvasStyles);\n            // To blob and emit data\n            const EMIT_DATA = () => {\n                this.eventEmit(code);\n                this.dataForResize = code;\n            };\n            // HTMLImageElement\n            if (element instanceof HTMLImageElement) {\n                callback(true);\n                EMIT_DATA();\n                VIBRATE(this.vibrate);\n                PLAY_AUDIO(this.isBeep);\n            }\n            // HTMLVideoElement\n            if (element instanceof HTMLVideoElement) {\n                EMIT_DATA();\n                VIBRATE(this.vibrate);\n                PLAY_AUDIO(this.isBeep);\n            }\n        }\n        else {\n            callback(false);\n            REMOVE_RESULT_PANEL(this.resultsPanel.nativeElement);\n            this.dataForResize = [];\n        }\n    }\n    /**\n     * eventEmit\n     * @param response\n     */\n    eventEmit(response = false) {\n        (response !== false) && this.data.next(response || []);\n        (response !== false) && this.event.emit(response || []);\n    }\n    /**\n     * Single-thread\n     * Loop Recording on Camera\n     * Must be destroy request\n     * Not using: requestAnimationFrame\n     * @param delay\n     */\n    requestAnimationFrame(delay = 100) {\n        try {\n            clearTimeout(this.rAF_ID);\n            this.rAF_ID = setTimeout(() => {\n                if (this.video.nativeElement.readyState === this.video.nativeElement.HAVE_ENOUGH_DATA) {\n                    delay = 0; // Appy first request\n                    WASM_READY() && this.drawImage(this.video.nativeElement);\n                    this.isStart && !this.isPause && this.requestAnimationFrame(delay);\n                }\n            }, /*avoid cache mediaStream*/ delay || this.fps);\n        }\n        catch (error) {\n            clearTimeout(this.rAF_ID);\n        }\n    }\n    /**\n     * isReady\n     */\n    get isReady() {\n        return this.ready;\n    }\n    ngOnDestroy() {\n        this.pause();\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.0.3\", ngImport: i0, type: NgxScannerQrcodeComponent, deps: [{ token: i0.Renderer2 }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component }); }\n    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"16.0.3\", type: NgxScannerQrcodeComponent, selector: \"ngx-scanner-qrcode\", inputs: { src: \"src\", fps: \"fps\", vibrate: \"vibrate\", decode: \"decode\", isBeep: \"isBeep\", config: \"config\", constraints: \"constraints\", canvasStyles: \"canvasStyles\" }, outputs: { event: \"event\" }, host: { classAttribute: \"ngx-scanner-qrcode\" }, viewQueries: [{ propertyName: \"video\", first: true, predicate: [\"video\"], descendants: true }, { propertyName: \"canvas\", first: true, predicate: [\"canvas\"], descendants: true }, { propertyName: \"resultsPanel\", first: true, predicate: [\"resultsPanel\"], descendants: true }], exportAs: [\"scanner\"], ngImport: i0, template: `<div #resultsPanel class=\"origin-overlay\"></div><canvas #canvas class=\"origin-canvas\"></canvas><video #video playsinline class=\"origin-video\"></video>`, isInline: true, styles: [\".ngx-scanner-qrcode{display:block;position:relative}.origin-overlay{width:100%;position:absolute}.origin-overlay span{z-index:2;text-align:left;position:absolute}.origin-overlay .qrcode-polygon{z-index:1;position:absolute}.origin-canvas{width:100%;position:absolute}.origin-video{width:100%;background-color:#262626}.qrcode-tooltip{z-index:3;position:absolute}.qrcode-tooltip:hover .qrcode-tooltip-temp{display:block;position:absolute;cursor:copy}.qrcode-tooltip:hover .qrcode-tooltip-temp:active{color:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp{bottom:0;left:50%;color:#fff;text-align:left;display:none;width:max-content;word-wrap:break-word;transform:translate(-50%);transform-style:preserve-3d;background-color:#000000d0;box-shadow:1px 1px 20px #000000e0}.qrcode-tooltip .qrcode-tooltip-temp svg{cursor:pointer}.qrcode-tooltip .qrcode-tooltip-temp svg rect{fill:none;stroke:#fff;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg path{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg:active rect{stroke:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp svg:active path{stroke:#afafaf}\\n\"], encapsulation: i0.ViewEncapsulation.None }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.0.3\", ngImport: i0, type: NgxScannerQrcodeComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-scanner-qrcode', template: `<div #resultsPanel class=\"origin-overlay\"></div><canvas #canvas class=\"origin-canvas\"></canvas><video #video playsinline class=\"origin-video\"></video>`, host: { 'class': 'ngx-scanner-qrcode' }, exportAs: 'scanner', inputs: ['src', 'fps', 'vibrate', 'decode', 'isBeep', 'config', 'constraints', 'canvasStyles'], outputs: ['event'], queries: {\n                        video: new ViewChild('video'),\n                        canvas: new ViewChild('canvas'),\n                        resultsPanel: new ViewChild('resultsPanel')\n                    }, encapsulation: ViewEncapsulation.None, styles: [\".ngx-scanner-qrcode{display:block;position:relative}.origin-overlay{width:100%;position:absolute}.origin-overlay span{z-index:2;text-align:left;position:absolute}.origin-overlay .qrcode-polygon{z-index:1;position:absolute}.origin-canvas{width:100%;position:absolute}.origin-video{width:100%;background-color:#262626}.qrcode-tooltip{z-index:3;position:absolute}.qrcode-tooltip:hover .qrcode-tooltip-temp{display:block;position:absolute;cursor:copy}.qrcode-tooltip:hover .qrcode-tooltip-temp:active{color:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp{bottom:0;left:50%;color:#fff;text-align:left;display:none;width:max-content;word-wrap:break-word;transform:translate(-50%);transform-style:preserve-3d;background-color:#000000d0;box-shadow:1px 1px 20px #000000e0}.qrcode-tooltip .qrcode-tooltip-temp svg{cursor:pointer}.qrcode-tooltip .qrcode-tooltip-temp svg rect{fill:none;stroke:#fff;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg path{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg:active rect{stroke:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp svg:active path{stroke:#afafaf}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.ElementRef }]; } });\n\nvar ScannerQRCodeSymbolType;\n(function (ScannerQRCodeSymbolType) {\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_NONE\"] = 0] = \"ScannerQRCode_NONE\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_PARTIAL\"] = 1] = \"ScannerQRCode_PARTIAL\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_EAN2\"] = 2] = \"ScannerQRCode_EAN2\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_EAN5\"] = 5] = \"ScannerQRCode_EAN5\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_EAN8\"] = 8] = \"ScannerQRCode_EAN8\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_UPCE\"] = 9] = \"ScannerQRCode_UPCE\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_ISBN10\"] = 10] = \"ScannerQRCode_ISBN10\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_UPCA\"] = 12] = \"ScannerQRCode_UPCA\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_EAN13\"] = 13] = \"ScannerQRCode_EAN13\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_ISBN13\"] = 14] = \"ScannerQRCode_ISBN13\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_COMPOSITE\"] = 15] = \"ScannerQRCode_COMPOSITE\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_I25\"] = 25] = \"ScannerQRCode_I25\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_DATABAR\"] = 34] = \"ScannerQRCode_DATABAR\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_DATABAR_EXP\"] = 35] = \"ScannerQRCode_DATABAR_EXP\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_CODABAR\"] = 38] = \"ScannerQRCode_CODABAR\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_CODE39\"] = 39] = \"ScannerQRCode_CODE39\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_PDF417\"] = 57] = \"ScannerQRCode_PDF417\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_QRCODE\"] = 64] = \"ScannerQRCode_QRCODE\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_SQCODE\"] = 80] = \"ScannerQRCode_SQCODE\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_CODE93\"] = 93] = \"ScannerQRCode_CODE93\";\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_CODE128\"] = 128] = \"ScannerQRCode_CODE128\";\n    /*\n     * Please see _ScannerQRCode_get_symbol_hash() if adding\n     * anything after 128\n     */\n    /** mask for base symbol type.\n     * @deprecated in 0.11, remove this from existing code\n     */\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_SYMBOL\"] = 255] = \"ScannerQRCode_SYMBOL\";\n    /** 2-digit add-on flag.\n     * @deprecated in 0.11, a ::ScannerQRCode_EAN2 component is used for\n     * 2-digit GS1 add-ons\n     */\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_ADDON2\"] = 512] = \"ScannerQRCode_ADDON2\";\n    /** 5-digit add-on flag.\n     * @deprecated in 0.11, a ::ScannerQRCode_EAN5 component is used for\n     * 5-digit GS1 add-ons\n     */\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_ADDON5\"] = 1280] = \"ScannerQRCode_ADDON5\";\n    /** add-on flag mask.\n     * @deprecated in 0.11, GS1 add-ons are represented using composite\n     * symbols of type ::ScannerQRCode_COMPOSITE; add-on components use ::ScannerQRCode_EAN2\n     * or ::ScannerQRCode_EAN5\n     */\n    ScannerQRCodeSymbolType[ScannerQRCodeSymbolType[\"ScannerQRCode_ADDON\"] = 1792] = \"ScannerQRCode_ADDON\";\n})(ScannerQRCodeSymbolType || (ScannerQRCodeSymbolType = {}));\nvar ScannerQRCodeConfigType;\n(function (ScannerQRCodeConfigType) {\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_ENABLE\"] = 0] = \"ScannerQRCode_CFG_ENABLE\";\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_ADD_CHECK\"] = 1] = \"ScannerQRCode_CFG_ADD_CHECK\";\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_EMIT_CHECK\"] = 2] = \"ScannerQRCode_CFG_EMIT_CHECK\";\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_ASCII\"] = 3] = \"ScannerQRCode_CFG_ASCII\";\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_BINARY\"] = 4] = \"ScannerQRCode_CFG_BINARY\";\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_NUM\"] = 5] = \"ScannerQRCode_CFG_NUM\";\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_MIN_LEN\"] = 32] = \"ScannerQRCode_CFG_MIN_LEN\";\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_MAX_LEN\"] = 33] = \"ScannerQRCode_CFG_MAX_LEN\";\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_UNCERTAINTY\"] = 64] = \"ScannerQRCode_CFG_UNCERTAINTY\";\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_POSITION\"] = 128] = \"ScannerQRCode_CFG_POSITION\";\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_TEST_INVERTED\"] = 129] = \"ScannerQRCode_CFG_TEST_INVERTED\";\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_X_DENSITY\"] = 256] = \"ScannerQRCode_CFG_X_DENSITY\";\n    ScannerQRCodeConfigType[ScannerQRCodeConfigType[\"ScannerQRCode_CFG_Y_DENSITY\"] = 257] = \"ScannerQRCode_CFG_Y_DENSITY\";\n})(ScannerQRCodeConfigType || (ScannerQRCodeConfigType = {}));\nvar ScannerQRCodeOrientation;\n(function (ScannerQRCodeOrientation) {\n    ScannerQRCodeOrientation[ScannerQRCodeOrientation[\"ScannerQRCode_ORIENT_UNKNOWN\"] = -1] = \"ScannerQRCode_ORIENT_UNKNOWN\";\n    ScannerQRCodeOrientation[ScannerQRCodeOrientation[\"ScannerQRCode_ORIENT_UP\"] = 0] = \"ScannerQRCode_ORIENT_UP\";\n    ScannerQRCodeOrientation[ScannerQRCodeOrientation[\"ScannerQRCode_ORIENT_RIGHT\"] = 1] = \"ScannerQRCode_ORIENT_RIGHT\";\n    ScannerQRCodeOrientation[ScannerQRCodeOrientation[\"ScannerQRCode_ORIENT_DOWN\"] = 2] = \"ScannerQRCode_ORIENT_DOWN\";\n    ScannerQRCodeOrientation[ScannerQRCodeOrientation[\"ScannerQRCode_ORIENT_LEFT\"] = 3] = \"ScannerQRCode_ORIENT_LEFT\";\n})(ScannerQRCodeOrientation || (ScannerQRCodeOrientation = {}));\nclass ScannerQRCodeTypePointer {\n    constructor(ptr, buf) {\n        this.ptr = ptr;\n        this.ptr32 = ptr >> 2;\n        this.buf = buf;\n        this.HEAP8 = new Int8Array(buf);\n        this.HEAPU32 = new Uint32Array(buf);\n        this.HEAP32 = new Int32Array(buf);\n    }\n}\nclass ScannerQRCodeSymbolPtr extends ScannerQRCodeTypePointer {\n    get type() {\n        return this.HEAPU32[this.ptr32];\n    }\n    get data() {\n        const len = this.HEAPU32[this.ptr32 + 4];\n        const ptr = this.HEAPU32[this.ptr32 + 5];\n        return Int8Array.from(this.HEAP8.subarray(ptr, ptr + len));\n    }\n    get points() {\n        const len = this.HEAPU32[this.ptr32 + 7];\n        const ptr = this.HEAPU32[this.ptr32 + 8];\n        const ptr32 = ptr >> 2;\n        const res = [];\n        for (let i = 0; i < len; ++i) {\n            const x = this.HEAP32[ptr32 + i * 2];\n            const y = this.HEAP32[ptr32 + i * 2 + 1];\n            res.push({ x, y });\n        }\n        return res;\n    }\n    get orientation() {\n        return this.HEAP32[this.ptr32 + 9];\n    }\n    get next() {\n        const ptr = this.HEAPU32[this.ptr32 + 11];\n        if (!ptr)\n            return null;\n        return new ScannerQRCodeSymbolPtr(ptr, this.buf);\n    }\n    get time() {\n        return this.HEAPU32[this.ptr32 + 13];\n    }\n    get cacheCount() {\n        return this.HEAP32[this.ptr32 + 14];\n    }\n    get quality() {\n        return this.HEAP32[this.ptr32 + 15];\n    }\n}\nclass SymbolSetPtr extends ScannerQRCodeTypePointer {\n    get head() {\n        const ptr = this.HEAPU32[this.ptr32 + 2];\n        if (!ptr)\n            return null;\n        return new ScannerQRCodeSymbolPtr(ptr, this.buf);\n    }\n}\nclass ScannerQRCodeResult {\n    constructor(ptr) {\n        this.value = '';\n        this.type = ptr.type;\n        this.typeName = ScannerQRCodeSymbolType[this.type];\n        this.data = ptr.data;\n        this.points = ptr.points;\n        this.orientation = ptr.orientation;\n        this.time = ptr.time;\n        this.cacheCount = ptr.cacheCount;\n        this.quality = ptr.quality;\n    }\n    static createSymbolsFromPtr(ptr, buf) {\n        if (ptr == 0)\n            return [];\n        const set = new SymbolSetPtr(ptr, buf);\n        let symbol = set.head;\n        const res = [];\n        while (symbol !== null) {\n            res.push(new ScannerQRCodeResult(symbol));\n            symbol = symbol.next;\n        }\n        return res;\n    }\n    decode(encoding) {\n        const decoder = new TextDecoder(encoding);\n        return decoder.decode(this.data);\n    }\n}\n\nclass NgxScannerQrcodeModule {\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.0.3\", ngImport: i0, type: NgxScannerQrcodeModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule }); }\n    static { this.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"16.0.3\", ngImport: i0, type: NgxScannerQrcodeModule, declarations: [NgxScannerQrcodeComponent], exports: [NgxScannerQrcodeComponent] }); }\n    static { this.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"16.0.3\", ngImport: i0, type: NgxScannerQrcodeModule, providers: [NgxScannerQrcodeService] }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.0.3\", ngImport: i0, type: NgxScannerQrcodeModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [NgxScannerQrcodeComponent],\n                    exports: [NgxScannerQrcodeComponent],\n                    providers: [NgxScannerQrcodeService],\n                }]\n        }] });\n\n/*\n * Public API Surface of ngx-scanner-qrcode\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { LOAD_WASM, NgxScannerQrcodeComponent, NgxScannerQrcodeModule, NgxScannerQrcodeService, ScannerQRCodeConfigType, ScannerQRCodeOrientation, ScannerQRCodeResult, ScannerQRCodeSymbolType };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}